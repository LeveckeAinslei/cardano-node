<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-deprecations #-}</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState.Types</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><span class="hs-identifier">BlocksMade</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><span class="hs-identifier">EpochNo</span></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><span class="hs-identifier">StrictMaybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Binary</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><span class="hs-identifier">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decCBOR</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><span class="hs-identifier">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Share</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decShareCBOR</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decSharePlusCBOR</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><span class="hs-identifier">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encCBOR</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-identifier">FromCBOR</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="hs-identifier">Interns</span></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-identifier">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="hs-identifier">decNoShareCBOR</span></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><span class="hs-identifier">decShareLensCBOR</span></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><span class="hs-identifier">decodeRecordNamed</span></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="hs-identifier">decodeRecordNamedT</span></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><span class="hs-identifier">encodeListLen</span></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="hs-identifier">toPlainDecoder</span></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Binary.Coders</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Decode</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">From</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">RecD</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Encode</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">encode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(!&gt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;!)</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.CertState</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><span class="hs-identifier">CertState</span></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><span class="hs-identifier">DRepState</span></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="hs-identifier">certDStateL</span></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="hs-identifier">certVStateL</span></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><span class="hs-identifier">dsUnifiedL</span></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><span class="hs-identifier">obligationCertState</span></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><span class="hs-identifier">vsDRepsL</span></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Coin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Coin</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">CompactForm</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Credential</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Credential</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Crypto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Crypto</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.EpochBoundary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SnapShots</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ssStakeDistrL</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ssStakeMarkL</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Keys</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="hs-identifier">KeyHash</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="hs-identifier">KeyPair</span></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><span class="hs-identifier">KeyRole</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.PoolDistr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">PoolDistr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Core.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Core</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Era.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Era.html#ShelleyEra"><span class="hs-identifier">ShelleyEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.PoolRank.html"><span class="hs-identifier">Cardano.Ledger.Shelley.PoolRank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.PoolRank.html#NonMyopic"><span class="hs-identifier">NonMyopic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.RewardUpdate.html"><span class="hs-identifier">Cardano.Ledger.Shelley.RewardUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.RewardUpdate.html#PulsingRewUpdate"><span class="hs-identifier">PulsingRewUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.TreeDiff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToExpr</span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.UMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.UTxO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UTxO</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier">NFData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src/Control.Monad.State.Strict.html"><span class="hs-identifier">Control.Monad.State.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.State.Strict.html#evalStateT"><span class="hs-identifier">evalStateT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/mtl-2.3.1/src/Control.Monad.Trans.html"><span class="hs-identifier">Control.Monad.Trans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#MonadTrans"><span class="hs-identifier">MonadTrans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier">lift</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">KeyValue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pairs</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Default</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">def</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Group</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Group</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">invert</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.VMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">VB</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">VMap</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">VP</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">NoThunks.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Numeric.Natural.html"><span class="hs-identifier">Numeric.Natural</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-bignum-1.3/src/GHC.Num.Natural.html#Natural"><span class="hs-identifier">Natural</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- ==================================</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">type</span><span> </span><span id="KeyPairs"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#KeyPairs"><span class="hs-identifier hs-var">KeyPairs</span></a></span></span><span> </span><span id="local-6989586621679603002"><span class="annot"><a href="#local-6989586621679603002"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyPair</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Payment</span></span><span> </span><span class="annot"><a href="#local-6989586621679603002"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyPair</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="annot"><a href="#local-6989586621679603002"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">KeyPairs</span><span> </span><span class="hs-pragma">&quot;Use `Test.Cardano.Ledger.Core.KeyPair (KeyPairs)` instead&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-keyword">type</span><span> </span><span id="RewardAccounts"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#RewardAccounts"><span class="hs-identifier hs-var">RewardAccounts</span></a></span></span><span> </span><span id="local-6989586621679603005"><span class="annot"><a href="#local-6989586621679603005"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="annot"><a href="#local-6989586621679603005"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">data</span><span> </span><span id="AccountState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-var">AccountState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AccountState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-var">AccountState</span></a></span></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="asTreasury"><span class="annot"><span class="annottext">AccountState -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasury"><span class="hs-identifier hs-var hs-var">asTreasury</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="asReserves"><span class="annot"><span class="annottext">AccountState -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asReserves"><span class="hs-identifier hs-var hs-var">asReserves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679603010"><span id="local-6989586621679603017"><span id="local-6989586621679603021"><span class="annot"><span class="annottext">Int -&gt; AccountState -&gt; ShowS
[AccountState] -&gt; ShowS
AccountState -&gt; String
(Int -&gt; AccountState -&gt; ShowS)
-&gt; (AccountState -&gt; String)
-&gt; ([AccountState] -&gt; ShowS)
-&gt; Show AccountState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; AccountState -&gt; ShowS
showsPrec :: Int -&gt; AccountState -&gt; ShowS
$cshow :: AccountState -&gt; String
show :: AccountState -&gt; String
$cshowList :: [AccountState] -&gt; ShowS
showList :: [AccountState] -&gt; ShowS
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603025"><span id="local-6989586621679603030"><span class="annot"><span class="annottext">AccountState -&gt; AccountState -&gt; Bool
(AccountState -&gt; AccountState -&gt; Bool)
-&gt; (AccountState -&gt; AccountState -&gt; Bool) -&gt; Eq AccountState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: AccountState -&gt; AccountState -&gt; Bool
== :: AccountState -&gt; AccountState -&gt; Bool
$c/= :: AccountState -&gt; AccountState -&gt; Bool
/= :: AccountState -&gt; AccountState -&gt; Bool
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603035"><span id="local-6989586621679603037"><span class="annot"><span class="annottext">(forall x. AccountState -&gt; Rep AccountState x)
-&gt; (forall x. Rep AccountState x -&gt; AccountState)
-&gt; Generic AccountState
forall x. Rep AccountState x -&gt; AccountState
forall x. AccountState -&gt; Rep AccountState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. AccountState -&gt; Rep AccountState x
from :: forall x. AccountState -&gt; Rep AccountState x
$cto :: forall x. Rep AccountState x -&gt; AccountState
to :: forall x. Rep AccountState x -&gt; AccountState
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679603044"><span id="local-6989586621679603048"><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-100"></span><span>  </span><span id="local-6989586621679603057"><span class="annot"><span class="annottext">encCBOR :: AccountState -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span id="local-6989586621679603058"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603058"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679603059"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603059"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603058"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603059"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679603064"><span id="local-6989586621679603068"><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-104"></span><span>  </span><span id="local-6989586621679603082"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s AccountState
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (AccountState -&gt; Int)
-&gt; Decoder s AccountState
-&gt; Decoder s AccountState
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">decodeRecordNamed</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;AccountState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; AccountState -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s AccountState -&gt; Decoder s AccountState)
-&gt; Decoder s AccountState -&gt; Decoder s AccountState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; AccountState
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-var">AccountState</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Coin -&gt; AccountState)
-&gt; Decoder s Coin -&gt; Decoder s (Coin -&gt; AccountState)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Coin
forall s. Decoder s Coin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (Coin -&gt; AccountState)
-&gt; Decoder s Coin -&gt; Decoder s AccountState
forall a b. Decoder s (a -&gt; b) -&gt; Decoder s a -&gt; Decoder s b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s Coin
forall s. Decoder s Coin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679603088"><span id="local-6989586621679603092"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621679603099"><span class="annot"><span class="annottext">toJSON :: AccountState -&gt; Value
</span><a href="#local-6989586621679603099"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (AccountState -&gt; [Pair]) -&gt; AccountState -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState -&gt; [Pair]
forall a. KeyValue a =&gt; AccountState -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toAccountStatePairs"><span class="hs-identifier hs-var">toAccountStatePairs</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621679603107"><span class="annot"><span class="annottext">toEncoding :: AccountState -&gt; Encoding
</span><a href="#local-6989586621679603107"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (AccountState -&gt; Series) -&gt; AccountState -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (AccountState -&gt; [Series]) -&gt; AccountState -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState -&gt; [Series]
forall a. KeyValue a =&gt; AccountState -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toAccountStatePairs"><span class="hs-identifier hs-var">toAccountStatePairs</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span id="local-6989586621679602283"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toAccountStatePairs"><span class="hs-identifier hs-type">toAccountStatePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679602283"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679602283"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-112"></span><span id="toAccountStatePairs"><span class="annot"><span class="annottext">toAccountStatePairs :: forall a. KeyValue a =&gt; AccountState -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toAccountStatePairs"><span class="hs-identifier hs-var hs-var">toAccountStatePairs</span></a></span></span><span> </span><span id="local-6989586621679603118"><span class="annot"><span class="annottext">as :: AccountState
</span><a href="#local-6989586621679603118"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679603119"><span class="annot"><span class="annottext">Coin
asTreasury :: AccountState -&gt; Coin
asTreasury :: Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasury"><span class="hs-identifier hs-var hs-var">asTreasury</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603120"><span class="annot"><span class="annottext">Coin
asReserves :: AccountState -&gt; Coin
asReserves :: Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asReserves"><span class="hs-identifier hs-var hs-var">asReserves</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679603118"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-114"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;treasury&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603119"><span class="hs-identifier hs-var">asTreasury</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;reserves&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603120"><span class="hs-identifier hs-var">asReserves</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679603122"><span id="local-6989586621679603126"><span id="local-6989586621679603132"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span></span></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679603163"><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-keyword">data</span><span> </span><span id="EpochState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-var">EpochState</span></a></span></span><span> </span><span id="local-6989586621679602341"><span class="annot"><a href="#local-6989586621679602341"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EpochState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-var">EpochState</span></a></span></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="esAccountState"><span class="annot"><span class="annottext">forall era. EpochState era -&gt; AccountState
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountState"><span class="hs-identifier hs-var hs-var">esAccountState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="esLState"><span class="annot"><span class="annottext">forall era. EpochState era -&gt; LedgerState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLState"><span class="hs-identifier hs-var hs-var">esLState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602341"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="esSnapshots"><span class="annot"><span class="annottext">forall era. EpochState era -&gt; SnapShots (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshots"><span class="hs-identifier hs-var hs-var">esSnapshots</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SnapShots</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602341"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="esNonMyopic"><span class="annot"><span class="annottext">forall era. EpochState era -&gt; NonMyopic (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopic"><span class="hs-identifier hs-var hs-var">esNonMyopic</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.PoolRank.html#NonMyopic"><span class="hs-identifier hs-type">NonMyopic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602341"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-comment">-- ^ This field, esNonMyopic, does not appear in the formal spec</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-comment">-- and is not a part of the protocol. It is only used for providing</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-comment">-- data to the stake pool ranking calculation @getNonMyopicMemberRewards@.</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-comment">-- See https://github.com/input-output-hk/cardano-ledger/releases/latest/download/pool-ranking.pdf</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679603186"><span id="local-6989586621679603188"><span class="annot"><span class="annottext">(forall x. EpochState era -&gt; Rep (EpochState era) x)
-&gt; (forall x. Rep (EpochState era) x -&gt; EpochState era)
-&gt; Generic (EpochState era)
forall x. Rep (EpochState era) x -&gt; EpochState era
forall x. EpochState era -&gt; Rep (EpochState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (EpochState era) x -&gt; EpochState era
forall era x. EpochState era -&gt; Rep (EpochState era) x
$cfrom :: forall era x. EpochState era -&gt; Rep (EpochState era) x
from :: forall x. EpochState era -&gt; Rep (EpochState era) x
$cto :: forall era x. Rep (EpochState era) x -&gt; EpochState era
to :: forall x. Rep (EpochState era) x -&gt; EpochState era
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span id="local-6989586621679603193"><span id="local-6989586621679603203"><span id="local-6989586621679603207"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602359"><span class="annot"><a href="#local-6989586621679602359"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602359"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602359"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-138"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602359"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span id="local-6989586621679603212"><span id="local-6989586621679603221"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602364"><span class="annot"><a href="#local-6989586621679602364"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602364"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602364"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-144"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602364"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-147"></span><span>  </span><span id="local-6989586621679602376"><span id="local-6989586621679603227"><span id="local-6989586621679603231"><span id="local-6989586621679603237"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602376"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602376"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-150"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602376"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-153"></span><span>  </span><span id="local-6989586621679602381"><span id="local-6989586621679603285"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602381"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602381"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602381"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621679602383"><span id="local-6989586621679603318"><span id="local-6989586621679603322"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602383"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602383"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602383"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621679603335"><span class="annot"><span class="annottext">encCBOR :: EpochState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679603336"><span class="annot"><span class="annottext">AccountState
esAccountState :: forall era. EpochState era -&gt; AccountState
esAccountState :: AccountState
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountState"><span class="hs-identifier hs-var hs-var">esAccountState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603337"><span class="annot"><span class="annottext">LedgerState era
esLState :: forall era. EpochState era -&gt; LedgerState era
esLState :: LedgerState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLState"><span class="hs-identifier hs-var hs-var">esLState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603338"><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
esSnapshots :: forall era. EpochState era -&gt; SnapShots (EraCrypto era)
esSnapshots :: SnapShots (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshots"><span class="hs-identifier hs-var hs-var">esSnapshots</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603339"><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
esNonMyopic :: forall era. EpochState era -&gt; NonMyopic (EraCrypto era)
esNonMyopic :: NonMyopic (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopic"><span class="hs-identifier hs-var hs-var">esNonMyopic</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (EpochState era) -&gt; Encoding
forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><span class="hs-identifier hs-var">encode</span></span><span> </span><span class="annot"><span class="annottext">(Encode ('Closed 'Dense) (EpochState era) -&gt; Encoding)
-&gt; Encode ('Closed 'Dense) (EpochState era) -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">(AccountState
 -&gt; LedgerState era
 -&gt; SnapShots (EraCrypto era)
 -&gt; NonMyopic (EraCrypto era)
 -&gt; EpochState era)
-&gt; Encode
     ('Closed 'Dense)
     (AccountState
      -&gt; LedgerState era
      -&gt; SnapShots (EraCrypto era)
      -&gt; NonMyopic (EraCrypto era)
      -&gt; EpochState era)
forall t. t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">Rec</span></span><span> </span><span class="annot"><span class="annottext">AccountState
-&gt; LedgerState era
-&gt; SnapShots (EraCrypto era)
-&gt; NonMyopic (EraCrypto era)
-&gt; EpochState era
forall era.
AccountState
-&gt; LedgerState era
-&gt; SnapShots (EraCrypto era)
-&gt; NonMyopic (EraCrypto era)
-&gt; EpochState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-var">EpochState</span></a></span><span>
</span><span id="line-167"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (AccountState
   -&gt; LedgerState era
   -&gt; SnapShots (EraCrypto era)
   -&gt; NonMyopic (EraCrypto era)
   -&gt; EpochState era)
-&gt; Encode ('Closed 'Dense) AccountState
-&gt; Encode
     ('Closed 'Dense)
     (LedgerState era
      -&gt; SnapShots (EraCrypto era)
      -&gt; NonMyopic (EraCrypto era)
      -&gt; EpochState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">AccountState -&gt; Encode ('Closed 'Dense) AccountState
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679603336"><span class="hs-identifier hs-var">esAccountState</span></a></span><span>
</span><span id="line-168"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (LedgerState era
   -&gt; SnapShots (EraCrypto era)
   -&gt; NonMyopic (EraCrypto era)
   -&gt; EpochState era)
-&gt; Encode ('Closed 'Dense) (LedgerState era)
-&gt; Encode
     ('Closed 'Dense)
     (SnapShots (EraCrypto era)
      -&gt; NonMyopic (EraCrypto era) -&gt; EpochState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era -&gt; Encode ('Closed 'Dense) (LedgerState era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679603337"><span class="hs-identifier hs-var">esLState</span></a></span><span> </span><span class="hs-comment">-- We get better sharing when encoding ledger state before snaphots</span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (SnapShots (EraCrypto era)
   -&gt; NonMyopic (EraCrypto era) -&gt; EpochState era)
-&gt; Encode ('Closed 'Dense) (SnapShots (EraCrypto era))
-&gt; Encode
     ('Closed 'Dense) (NonMyopic (EraCrypto era) -&gt; EpochState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
-&gt; Encode ('Closed 'Dense) (SnapShots (EraCrypto era))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
</span><a href="#local-6989586621679603338"><span class="hs-identifier hs-var">esSnapshots</span></a></span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense) (NonMyopic (EraCrypto era) -&gt; EpochState era)
-&gt; Encode ('Closed 'Dense) (NonMyopic (EraCrypto era))
-&gt; Encode ('Closed 'Dense) (EpochState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
-&gt; Encode ('Closed 'Dense) (NonMyopic (EraCrypto era))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
</span><a href="#local-6989586621679603339"><span class="hs-identifier hs-var">esNonMyopic</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-173"></span><span>  </span><span id="local-6989586621679602408"><span id="local-6989586621679603350"><span id="local-6989586621679603354"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602408"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602408"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602408"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-178"></span><span>  </span><span id="local-6989586621679603393"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (EpochState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (EpochState era -&gt; Int)
-&gt; Decoder s (EpochState era)
-&gt; Decoder s (EpochState era)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">decodeRecordNamed</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;EpochState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; EpochState era -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (EpochState era) -&gt; Decoder s (EpochState era))
-&gt; Decoder s (EpochState era) -&gt; Decoder s (EpochState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><span class="annottext">(StateT
   (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
   (Decoder s)
   (EpochState era)
 -&gt; (Interns (Credential 'Staking (EraCrypto era)),
     Interns (KeyHash 'StakePool (EraCrypto era)))
 -&gt; Decoder s (EpochState era))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (EpochState era)
-&gt; Decoder s (EpochState era)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">StateT
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Decoder s)
  (EpochState era)
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Decoder s (EpochState era)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.State.Strict.html#evalStateT"><span class="hs-identifier hs-var">evalStateT</span></a></span><span> </span><span class="annot"><span class="annottext">(Interns (Credential 'Staking (EraCrypto era)),
 Interns (KeyHash 'StakePool (EraCrypto era)))
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT
   (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
   (Decoder s)
   (EpochState era)
 -&gt; Decoder s (EpochState era))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (EpochState era)
-&gt; Decoder s (EpochState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-181"></span><span>        </span><span id="local-6989586621679603395"><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679603395"><span class="hs-identifier hs-var">esAccountState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s AccountState
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     AccountState
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     m
     a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s AccountState
forall s. Decoder s AccountState
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-182"></span><span>        </span><span id="local-6989586621679603396"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679603396"><span class="hs-identifier hs-var">esLState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Decoder s)
  (LedgerState era)
StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
forall s.
StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><span class="hs-identifier hs-var">decSharePlusCBOR</span></span><span>
</span><span id="line-183"></span><span>        </span><span id="local-6989586621679603397"><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
</span><a href="#local-6989586621679603397"><span class="hs-identifier hs-var">esSnapshots</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Decoder s)
  (SnapShots (EraCrypto era))
StateT
  (Share (SnapShots (EraCrypto era)))
  (Decoder s)
  (SnapShots (EraCrypto era))
forall s.
StateT
  (Share (SnapShots (EraCrypto era)))
  (Decoder s)
  (SnapShots (EraCrypto era))
forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><span class="hs-identifier hs-var">decSharePlusCBOR</span></span><span>
</span><span id="line-184"></span><span>        </span><span id="local-6989586621679603398"><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
</span><a href="#local-6989586621679603398"><span class="hs-identifier hs-var">esNonMyopic</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (NonMyopic (EraCrypto era)))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (NonMyopic (EraCrypto era))
forall b bs s.
DecShareCBOR b =&gt;
SimpleGetter bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decShareLensCBOR</span></span><span> </span><span class="annot"><span class="annottext">(Share (NonMyopic (EraCrypto era))
 -&gt; Const r (Share (NonMyopic (EraCrypto era))))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Const
     r
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
(Interns (KeyHash 'StakePool (EraCrypto era))
 -&gt; Const r (Interns (KeyHash 'StakePool (EraCrypto era))))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Const
     r
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
SimpleGetter
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (NonMyopic (EraCrypto era)))
forall s t a b. Field2 s t a b =&gt; Lens s t a b
Lens
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (KeyHash 'StakePool (EraCrypto era)))
</span><span class="hs-identifier hs-var">_2</span></span><span>
</span><span id="line-185"></span><span>        </span><span class="annot"><span class="annottext">EpochState era
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (EpochState era)
forall a.
a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">AccountState
esAccountState :: AccountState
esAccountState :: AccountState
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountState"><span class="hs-identifier hs-var hs-var">esAccountState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
esSnapshots :: SnapShots (EraCrypto era)
esSnapshots :: SnapShots (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshots"><span class="hs-identifier hs-var hs-var">esSnapshots</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LedgerState era
esLState :: LedgerState era
esLState :: LedgerState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLState"><span class="hs-identifier hs-var hs-var">esLState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
esNonMyopic :: NonMyopic (EraCrypto era)
esNonMyopic :: NonMyopic (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopic"><span class="hs-identifier hs-var hs-var">esNonMyopic</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602459"><span id="local-6989586621679603412"><span id="local-6989586621679603416"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602459"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602459"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602459"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>  </span><span id="local-6989586621679603425"><span class="annot"><span class="annottext">toCBOR :: EpochState era -&gt; Encoding
</span><a href="#local-6989586621679603425"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><span class="hs-identifier hs-var">toEraCBOR</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602459"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602467"><span id="local-6989586621679603436"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602467"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602467"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602467"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-191"></span><span>  </span><span id="local-6989586621679603444"><span class="annot"><span class="annottext">fromCBOR :: forall s. Decoder s (EpochState era)
</span><a href="#local-6989586621679603444"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t s. (Era era, DecCBOR t) =&gt; Decoder s t
</span><span class="hs-identifier hs-var">fromEraCBOR</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602467"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602473"><span id="local-6989586621679603452"><span id="local-6989586621679603456"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602473"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602473"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602473"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>  </span><span id="local-6989586621679603463"><span class="annot"><span class="annottext">toJSON :: EpochState era -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (EpochState era -&gt; [Pair]) -&gt; EpochState era -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; [Pair]
forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
EpochState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toEpochStatePairs"><span class="hs-identifier hs-var">toEpochStatePairs</span></a></span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621679603469"><span class="annot"><span class="annottext">toEncoding :: EpochState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (EpochState era -&gt; Series) -&gt; EpochState era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (EpochState era -&gt; [Series]) -&gt; EpochState era -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; [Series]
forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
EpochState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toEpochStatePairs"><span class="hs-identifier hs-var">toEpochStatePairs</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span id="local-6989586621679602474"><span id="local-6989586621679602475"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toEpochStatePairs"><span class="hs-identifier hs-type">toEpochStatePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602474"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602474"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679602475"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602474"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679602475"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-204"></span><span id="toEpochStatePairs"><span class="annot"><span class="annottext">toEpochStatePairs :: forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
EpochState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toEpochStatePairs"><span class="hs-identifier hs-var hs-var">toEpochStatePairs</span></a></span></span><span> </span><span id="local-6989586621679603491"><span class="annot"><span class="annottext">es :: EpochState era
</span><a href="#local-6989586621679603491"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679603492"><span id="local-6989586621679603493"><span id="local-6989586621679603494"><span id="local-6989586621679603495"><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
NonMyopic (EraCrypto era)
LedgerState era
AccountState
esAccountState :: forall era. EpochState era -&gt; AccountState
esLState :: forall era. EpochState era -&gt; LedgerState era
esSnapshots :: forall era. EpochState era -&gt; SnapShots (EraCrypto era)
esNonMyopic :: forall era. EpochState era -&gt; NonMyopic (EraCrypto era)
esAccountState :: AccountState
esLState :: LedgerState era
esSnapshots :: SnapShots (EraCrypto era)
esNonMyopic :: NonMyopic (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountState"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679603491"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-206"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;esAccountState&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; AccountState -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679603492"><span class="hs-identifier hs-var">esAccountState</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;esSnapshots&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SnapShots (EraCrypto era) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
</span><a href="#local-6989586621679603494"><span class="hs-identifier hs-var">esSnapshots</span></a></span><span>
</span><span id="line-208"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;esLState&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; LedgerState era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679603493"><span class="hs-identifier hs-var">esLState</span></a></span><span>
</span><span id="line-209"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;esNonMyopic&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; NonMyopic (EraCrypto era) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
</span><a href="#local-6989586621679603495"><span class="hs-identifier hs-var">esNonMyopic</span></a></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- =============================</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Incremental Stake, Stake along with possible missed coins from danging Ptrs.</span><span>
</span><span id="line-215"></span><span class="hs-comment">--   Transactions can use Ptrs to refer to a stake credential in a TxOut. The Ptr</span><span>
</span><span id="line-216"></span><span class="hs-comment">--   does not have to point to anything until the epoch boundary, when we compute</span><span>
</span><span id="line-217"></span><span class="hs-comment">--   rewards and aggregate staking information for ranking. This is unusual but legal.</span><span>
</span><span id="line-218"></span><span class="hs-comment">--   In a non incremental system, we use whatever 'legal' Ptrs exist at the epoch</span><span>
</span><span id="line-219"></span><span class="hs-comment">--   boundary. Here we are computing things incrementally, so we need to remember Ptrs</span><span>
</span><span id="line-220"></span><span class="hs-comment">--   that might point to something by the time the epoch boundary is reached. When</span><span>
</span><span id="line-221"></span><span class="hs-comment">--   the epoch boundary is reached we 'resolve' these pointers, to see if any have</span><span>
</span><span id="line-222"></span><span class="hs-comment">--   become non-dangling since the time they were first used in the incremental computation.</span><span>
</span><span id="line-223"></span><span class="hs-keyword">data</span><span> </span><span id="IncrementalStake"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-var">IncrementalStake</span></a></span></span><span> </span><span id="local-6989586621679602481"><span class="annot"><a href="#local-6989586621679602481"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IStake"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-var">IStake</span></a></span></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="credMap"><span class="annot"><span class="annottext">forall c.
IncrementalStake c
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMap"><span class="hs-identifier hs-var hs-var">credMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="annot"><a href="#local-6989586621679602481"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompactForm</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ptrMap"><span class="annot"><span class="annottext">forall c. IncrementalStake c -&gt; Map Ptr (CompactForm Coin)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#ptrMap"><span class="hs-identifier hs-var hs-var">ptrMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompactForm</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679603500"><span id="local-6989586621679603502"><span class="annot"><span class="annottext">(forall x. IncrementalStake c -&gt; Rep (IncrementalStake c) x)
-&gt; (forall x. Rep (IncrementalStake c) x -&gt; IncrementalStake c)
-&gt; Generic (IncrementalStake c)
forall x. Rep (IncrementalStake c) x -&gt; IncrementalStake c
forall x. IncrementalStake c -&gt; Rep (IncrementalStake c) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall c x. Rep (IncrementalStake c) x -&gt; IncrementalStake c
forall c x. IncrementalStake c -&gt; Rep (IncrementalStake c) x
$cfrom :: forall c x. IncrementalStake c -&gt; Rep (IncrementalStake c) x
from :: forall x. IncrementalStake c -&gt; Rep (IncrementalStake c) x
$cto :: forall c x. Rep (IncrementalStake c) x -&gt; IncrementalStake c
to :: forall x. Rep (IncrementalStake c) x -&gt; IncrementalStake c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603505"><span id="local-6989586621679603514"><span id="local-6989586621679603518"><span class="annot"><span class="annottext">Int -&gt; IncrementalStake c -&gt; ShowS
[IncrementalStake c] -&gt; ShowS
IncrementalStake c -&gt; String
(Int -&gt; IncrementalStake c -&gt; ShowS)
-&gt; (IncrementalStake c -&gt; String)
-&gt; ([IncrementalStake c] -&gt; ShowS)
-&gt; Show (IncrementalStake c)
forall c. Int -&gt; IncrementalStake c -&gt; ShowS
forall c. [IncrementalStake c] -&gt; ShowS
forall c. IncrementalStake c -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall c. Int -&gt; IncrementalStake c -&gt; ShowS
showsPrec :: Int -&gt; IncrementalStake c -&gt; ShowS
$cshow :: forall c. IncrementalStake c -&gt; String
show :: IncrementalStake c -&gt; String
$cshowList :: forall c. [IncrementalStake c] -&gt; ShowS
showList :: [IncrementalStake c] -&gt; ShowS
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603524"><span id="local-6989586621679603532"><span class="annot"><span class="annottext">IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
(IncrementalStake c -&gt; IncrementalStake c -&gt; Bool)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; Bool)
-&gt; Eq (IncrementalStake c)
forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
== :: IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
$c/= :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
/= :: IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603541"><span id="local-6989586621679603549"><span id="local-6989586621679603556"><span id="local-6989586621679603560"><span id="local-6989586621679603563"><span id="local-6989586621679603566"><span id="local-6989586621679603569"><span class="annot"><span class="annottext">Eq (IncrementalStake c)
Eq (IncrementalStake c) =&gt;
(IncrementalStake c -&gt; IncrementalStake c -&gt; Ordering)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; Bool)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; Bool)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; Bool)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; Bool)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c)
-&gt; (IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c)
-&gt; Ord (IncrementalStake c)
IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
IncrementalStake c -&gt; IncrementalStake c -&gt; Ordering
IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
forall c. Eq (IncrementalStake c)
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Ordering
forall c.
IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
$ccompare :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Ordering
compare :: IncrementalStake c -&gt; IncrementalStake c -&gt; Ordering
$c&lt; :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
&lt; :: IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
$c&lt;= :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
&lt;= :: IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
$c&gt; :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
&gt; :: IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
$c&gt;= :: forall c. IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
&gt;= :: IncrementalStake c -&gt; IncrementalStake c -&gt; Bool
$cmax :: forall c.
IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
max :: IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
$cmin :: forall c.
IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
min :: IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603576"><span id="local-6989586621679603580"><span id="local-6989586621679603586"><span class="annot"><span class="annottext">Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo)
Proxy (IncrementalStake c) -&gt; String
(Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy (IncrementalStake c) -&gt; String)
-&gt; NoThunks (IncrementalStake c)
forall c. Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo)
forall c. Proxy (IncrementalStake c) -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
$cnoThunks :: forall c. Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: forall c. Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo)
wNoThunks :: Context -&gt; IncrementalStake c -&gt; IO (Maybe ThunkInfo)
$cshowTypeOf :: forall c. Proxy (IncrementalStake c) -&gt; String
showTypeOf :: Proxy (IncrementalStake c) -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679603616"><span class="annot"><span class="annottext">IncrementalStake c -&gt; ()
(IncrementalStake c -&gt; ()) -&gt; NFData (IncrementalStake c)
forall c. IncrementalStake c -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall c. IncrementalStake c -&gt; ()
rnf :: IncrementalStake c -&gt; ()
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602523"><span id="local-6989586621679603644"><span id="local-6989586621679603648"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602523"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602523"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621679603664"><span class="annot"><span class="annottext">encCBOR :: IncrementalStake c -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-type">IStake</span></a></span><span> </span><span id="local-6989586621679603665"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603665"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679603666"><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603666"><span class="hs-identifier hs-var">dangle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603665"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603666"><span class="hs-identifier hs-var">dangle</span></a></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602530"><span id="local-6989586621679603672"><span id="local-6989586621679603677"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602530"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602530"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602530"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="annot"><a href="#local-6989586621679602530"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>  </span><span id="local-6989586621679603698"><span class="annot"><span class="annottext">decShareCBOR :: forall s.
Share (IncrementalStake c) -&gt; Decoder s (IncrementalStake c)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></span></span><span> </span><span id="local-6989586621679603699"><span class="annot"><span class="annottext">Share (IncrementalStake c)
</span><a href="#local-6989586621679603699"><span class="hs-identifier hs-var">credInterns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (IncrementalStake c -&gt; Int)
-&gt; Decoder s (IncrementalStake c)
-&gt; Decoder s (IncrementalStake c)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">decodeRecordNamed</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Stake&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; IncrementalStake c -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (IncrementalStake c) -&gt; Decoder s (IncrementalStake c))
-&gt; Decoder s (IncrementalStake c) -&gt; Decoder s (IncrementalStake c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-237"></span><span>      </span><span id="local-6989586621679603700"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603700"><span class="hs-identifier hs-var">stake</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Share (Map (Credential 'Staking c) (CompactForm Coin))
-&gt; Decoder s (Map (Credential 'Staking c) (CompactForm Coin))
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s.
Share (Map (Credential 'Staking c) (CompactForm Coin))
-&gt; Decoder s (Map (Credential 'Staking c) (CompactForm Coin))
</span><span class="hs-identifier hs-var">decShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Share (IncrementalStake c)
Interns (Credential 'Staking c)
</span><a href="#local-6989586621679603699"><span class="hs-identifier hs-var">credInterns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Interns (CompactForm Coin)
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>      </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
forall c.
Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-var">IStake</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603700"><span class="hs-identifier hs-var">stake</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Ptr (CompactForm Coin) -&gt; IncrementalStake c)
-&gt; Decoder s (Map Ptr (CompactForm Coin))
-&gt; Decoder s (IncrementalStake c)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (Map Ptr (CompactForm Coin))
forall s. Decoder s (Map Ptr (CompactForm Coin))
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602541"><span id="local-6989586621679603703"><span id="local-6989586621679603707"><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602541"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-type">IStake</span></a></span><span> </span><span id="local-6989586621679603717"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603717"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679603718"><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603718"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679603719"><span class="annot"><span class="annottext">&lt;&gt; :: IncrementalStake c -&gt; IncrementalStake c -&gt; IncrementalStake c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-type">IStake</span></a></span><span> </span><span id="local-6989586621679603720"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603720"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679603721"><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603721"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
forall c.
Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-var">IStake</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin)
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#unionWith"><span class="hs-identifier hs-var">Map.unionWith</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603717"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603720"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#unionWith"><span class="hs-identifier hs-var">Map.unionWith</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603718"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603721"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602545"><span id="local-6989586621679603727"><span id="local-6989586621679603731"><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602545"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>  </span><span id="local-6989586621679603734"><span class="annot"><span class="annottext">mempty :: IncrementalStake c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
forall c.
Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-var">IStake</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
forall k a. Map k a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
forall k a. Map k a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602553"><span id="local-6989586621679603740"><span id="local-6989586621679603744"><span class="annot"><span class="hs-identifier hs-type">Data.Group.Group</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602553"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621679603752"><span class="annot"><span class="annottext">invert :: IncrementalStake c -&gt; IncrementalStake c
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">invert</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-type">IStake</span></a></span><span> </span><span id="local-6989586621679603753"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603753"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621679603754"><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603754"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
forall c.
Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-var">IStake</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; CompactForm Coin)
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#map"><span class="hs-identifier hs-var">Map.map</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin
forall m. Group m =&gt; m -&gt; m
</span><span class="hs-identifier hs-var">invert</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603753"><span class="hs-identifier hs-var">m1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; Map Ptr (CompactForm Coin)
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#map"><span class="hs-identifier hs-var">Map.map</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin
forall m. Group m =&gt; m -&gt; m
</span><span class="hs-identifier hs-var">invert</span></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603754"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602560"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602560"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621679603759"><span class="annot"><span class="annottext">def :: IncrementalStake c
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
forall c.
Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-var">IStake</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
forall k a. Map k a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
forall k a. Map k a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602562"><span id="local-6989586621679603764"><span id="local-6989586621679603768"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602562"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602562"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>  </span><span id="local-6989586621679603774"><span class="annot"><span class="annottext">toJSON :: IncrementalStake c -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (IncrementalStake c -&gt; [Pair]) -&gt; IncrementalStake c -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IncrementalStake c -&gt; [Pair]
forall a c. (KeyValue a, Crypto c) =&gt; IncrementalStake c -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toIncrementalStakePairs"><span class="hs-identifier hs-var">toIncrementalStakePairs</span></a></span><span>
</span><span id="line-254"></span><span>  </span><span id="local-6989586621679603779"><span class="annot"><span class="annottext">toEncoding :: IncrementalStake c -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (IncrementalStake c -&gt; Series) -&gt; IncrementalStake c -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (IncrementalStake c -&gt; [Series]) -&gt; IncrementalStake c -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">IncrementalStake c -&gt; [Series]
forall a c. (KeyValue a, Crypto c) =&gt; IncrementalStake c -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toIncrementalStakePairs"><span class="hs-identifier hs-var">toIncrementalStakePairs</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span id="local-6989586621679602563"><span id="local-6989586621679602564"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toIncrementalStakePairs"><span class="hs-identifier hs-type">toIncrementalStakePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679602563"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602564"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602564"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679602563"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-258"></span><span id="toIncrementalStakePairs"><span class="annot"><span class="annottext">toIncrementalStakePairs :: forall a c. (KeyValue a, Crypto c) =&gt; IncrementalStake c -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toIncrementalStakePairs"><span class="hs-identifier hs-var hs-var">toIncrementalStakePairs</span></a></span></span><span> </span><span id="local-6989586621679603795"><span class="annot"><span class="annottext">iStake :: IncrementalStake c
</span><a href="#local-6989586621679603795"><span class="hs-identifier hs-var">iStake</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-type">IStake</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IStake"><span class="hs-identifier hs-type">IStake</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679603796"><span id="local-6989586621679603797"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
Map Ptr (CompactForm Coin)
credMap :: forall c.
IncrementalStake c
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
ptrMap :: forall c. IncrementalStake c -&gt; Map Ptr (CompactForm Coin)
credMap :: Map (Credential 'Staking c) (CompactForm Coin)
ptrMap :: Map Ptr (CompactForm Coin)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMap"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IncrementalStake c
</span><a href="#local-6989586621679603795"><span class="hs-identifier hs-var">iStake</span></a></span><span> </span><span class="hs-comment">-- guard against addition or removal of fields</span><span>
</span><span id="line-260"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;credentials&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (Credential 'Staking c) (CompactForm Coin) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679603796"><span class="hs-identifier hs-var">credMap</span></a></span><span>
</span><span id="line-261"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;pointers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map Ptr (CompactForm Coin) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679603797"><span class="hs-identifier hs-var">ptrMap</span></a></span><span>
</span><span id="line-262"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">-- =============================</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | There is a serious invariant that we must maintain in the UTxOState.</span><span>
</span><span id="line-267"></span><span class="hs-comment">--   Given (UTxOState utxo _ _ _ istake) it must be the case that</span><span>
</span><span id="line-268"></span><span class="hs-comment">--   istake == (updateStakeDistribution (UTxO Map.empty) (UTxO Map.empty) utxo)</span><span>
</span><span id="line-269"></span><span class="hs-comment">--   Of course computing the RHS of the above equality can be very expensive, so we only</span><span>
</span><span id="line-270"></span><span class="hs-comment">--   use this route in the testing function smartUTxO. But we are very careful, wherever</span><span>
</span><span id="line-271"></span><span class="hs-comment">--   we update the UTxO, we carefully make INCREMENTAL changes to istake to maintain</span><span>
</span><span id="line-272"></span><span class="hs-comment">--   this invariant. This happens in the UTxO rule.</span><span>
</span><span id="line-273"></span><span class="hs-keyword">data</span><span> </span><span id="UTxOState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-var">UTxOState</span></a></span></span><span> </span><span id="local-6989586621679602572"><span class="annot"><a href="#local-6989586621679602572"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UTxOState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-var">UTxOState</span></a></span></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="utxosUtxo"><span class="annot"><span class="annottext">forall era. UTxOState era -&gt; UTxO era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxo"><span class="hs-identifier hs-var hs-var">utxosUtxo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621679602572"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="utxosDeposited"><span class="annot"><span class="annottext">forall era. UTxOState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDeposited"><span class="hs-identifier hs-var hs-var">utxosDeposited</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ This field is left lazy, because we only use it for assertions</span></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="utxosFees"><span class="annot"><span class="annottext">forall era. UTxOState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosFees"><span class="hs-identifier hs-var hs-var">utxosFees</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="utxosGovState"><span class="annot"><span class="annottext">forall era. UTxOState era -&gt; GovState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovState"><span class="hs-identifier hs-var hs-var">utxosGovState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602572"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="utxosStakeDistr"><span class="annot"><span class="annottext">forall era. UTxOState era -&gt; IncrementalStake (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosStakeDistr"><span class="hs-identifier hs-var hs-var">utxosStakeDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602572"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="utxosDonation"><span class="annot"><span class="annottext">forall era. UTxOState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDonation"><span class="hs-identifier hs-var hs-var">utxosDonation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679603806"><span id="local-6989586621679603808"><span class="annot"><span class="annottext">(forall x. UTxOState era -&gt; Rep (UTxOState era) x)
-&gt; (forall x. Rep (UTxOState era) x -&gt; UTxOState era)
-&gt; Generic (UTxOState era)
forall x. Rep (UTxOState era) x -&gt; UTxOState era
forall x. UTxOState era -&gt; Rep (UTxOState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (UTxOState era) x -&gt; UTxOState era
forall era x. UTxOState era -&gt; Rep (UTxOState era) x
$cfrom :: forall era x. UTxOState era -&gt; Rep (UTxOState era) x
from :: forall x. UTxOState era -&gt; Rep (UTxOState era) x
$cto :: forall era x. Rep (UTxOState era) x -&gt; UTxOState era
to :: forall x. Rep (UTxOState era) x -&gt; UTxOState era
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-285"></span><span>  </span><span id="local-6989586621679602585"><span id="local-6989586621679603813"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602585"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602585"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-288"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602585"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span id="local-6989586621679603846"><span id="local-6989586621679603858"><span id="local-6989586621679603862"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602588"><span class="annot"><a href="#local-6989586621679602588"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602588"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602588"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602588"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span id="local-6989586621679603870"><span id="local-6989586621679603881"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602591"><span class="annot"><a href="#local-6989586621679602591"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602591"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602591"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-300"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602591"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-303"></span><span>  </span><span id="local-6989586621679602594"><span id="local-6989586621679603890"><span id="local-6989586621679603894"><span id="local-6989586621679603900"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621679602594"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="annot"><a href="#local-6989586621679602594"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602594"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602594"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621679602596"><span id="local-6989586621679603946"><span id="local-6989586621679603950"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602596"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602596"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602596"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679603964"><span class="annot"><span class="annottext">encCBOR :: UTxOState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span id="local-6989586621679603965"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679603965"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span id="local-6989586621679603966"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603966"><span class="hs-identifier hs-var">dp</span></a></span></span><span> </span><span id="local-6989586621679603967"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603967"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621679603968"><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679603968"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span id="local-6989586621679603969"><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
</span><a href="#local-6989586621679603969"><span class="hs-identifier hs-var">sd</span></a></span></span><span> </span><span id="local-6989586621679603970"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603970"><span class="hs-identifier hs-var">don</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (UTxOState era) -&gt; Encoding
forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><span class="hs-identifier hs-var">encode</span></span><span> </span><span class="annot"><span class="annottext">(Encode ('Closed 'Dense) (UTxOState era) -&gt; Encoding)
-&gt; Encode ('Closed 'Dense) (UTxOState era) -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-317"></span><span>      </span><span class="annot"><span class="annottext">(UTxO era
 -&gt; Coin
 -&gt; Coin
 -&gt; GovState era
 -&gt; IncrementalStake (EraCrypto era)
 -&gt; Coin
 -&gt; UTxOState era)
-&gt; Encode
     ('Closed 'Dense)
     (UTxO era
      -&gt; Coin
      -&gt; Coin
      -&gt; GovState era
      -&gt; IncrementalStake (EraCrypto era)
      -&gt; Coin
      -&gt; UTxOState era)
forall t. t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">Rec</span></span><span> </span><span class="annot"><span class="annottext">UTxO era
-&gt; Coin
-&gt; Coin
-&gt; GovState era
-&gt; IncrementalStake (EraCrypto era)
-&gt; Coin
-&gt; UTxOState era
forall era.
UTxO era
-&gt; Coin
-&gt; Coin
-&gt; GovState era
-&gt; IncrementalStake (EraCrypto era)
-&gt; Coin
-&gt; UTxOState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-var">UTxOState</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (UTxO era
   -&gt; Coin
   -&gt; Coin
   -&gt; GovState era
   -&gt; IncrementalStake (EraCrypto era)
   -&gt; Coin
   -&gt; UTxOState era)
-&gt; Encode ('Closed 'Dense) (UTxO era)
-&gt; Encode
     ('Closed 'Dense)
     (Coin
      -&gt; Coin
      -&gt; GovState era
      -&gt; IncrementalStake (EraCrypto era)
      -&gt; Coin
      -&gt; UTxOState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">UTxO era -&gt; Encode ('Closed 'Dense) (UTxO era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679603965"><span class="hs-identifier hs-var">ut</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (Coin
   -&gt; Coin
   -&gt; GovState era
   -&gt; IncrementalStake (EraCrypto era)
   -&gt; Coin
   -&gt; UTxOState era)
-&gt; Encode ('Closed 'Dense) Coin
-&gt; Encode
     ('Closed 'Dense)
     (Coin
      -&gt; GovState era
      -&gt; IncrementalStake (EraCrypto era)
      -&gt; Coin
      -&gt; UTxOState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Encode ('Closed 'Dense) Coin
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603966"><span class="hs-identifier hs-var">dp</span></a></span><span>
</span><span id="line-320"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (Coin
   -&gt; GovState era
   -&gt; IncrementalStake (EraCrypto era)
   -&gt; Coin
   -&gt; UTxOState era)
-&gt; Encode ('Closed 'Dense) Coin
-&gt; Encode
     ('Closed 'Dense)
     (GovState era
      -&gt; IncrementalStake (EraCrypto era) -&gt; Coin -&gt; UTxOState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Encode ('Closed 'Dense) Coin
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603967"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-321"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (GovState era
   -&gt; IncrementalStake (EraCrypto era) -&gt; Coin -&gt; UTxOState era)
-&gt; Encode ('Closed 'Dense) (GovState era)
-&gt; Encode
     ('Closed 'Dense)
     (IncrementalStake (EraCrypto era) -&gt; Coin -&gt; UTxOState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">GovState era -&gt; Encode ('Closed 'Dense) (GovState era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679603968"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-322"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (IncrementalStake (EraCrypto era) -&gt; Coin -&gt; UTxOState era)
-&gt; Encode ('Closed 'Dense) (IncrementalStake (EraCrypto era))
-&gt; Encode ('Closed 'Dense) (Coin -&gt; UTxOState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
-&gt; Encode ('Closed 'Dense) (IncrementalStake (EraCrypto era))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
</span><a href="#local-6989586621679603969"><span class="hs-identifier hs-var">sd</span></a></span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (Coin -&gt; UTxOState era)
-&gt; Encode ('Closed 'Dense) Coin
-&gt; Encode ('Closed 'Dense) (UTxOState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><span class="hs-operator hs-var">!&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Encode ('Closed 'Dense) Coin
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">To</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679603970"><span class="hs-identifier hs-var">don</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621679602599"><span id="local-6989586621679603977"><span id="local-6989586621679603982"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602599"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602599"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-329"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-332"></span><span>    </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-333"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>  </span><span id="local-6989586621679604010"><span class="annot"><span class="annottext">decShareCBOR :: forall s. Share (UTxOState era) -&gt; Decoder s (UTxOState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></span></span><span> </span><span id="local-6989586621679604011"><span class="annot"><span class="annottext">Share (UTxOState era)
</span><a href="#local-6989586621679604011"><span class="hs-identifier hs-var">credInterns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (UTxOState era -&gt; Int)
-&gt; Decoder s (UTxOState era)
-&gt; Decoder s (UTxOState era)
forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">decodeRecordNamed</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;UTxOState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; UTxOState era -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Decoder s (UTxOState era) -&gt; Decoder s (UTxOState era))
-&gt; Decoder s (UTxOState era) -&gt; Decoder s (UTxOState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-336"></span><span>      </span><span id="local-6989586621679604012"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679604012"><span class="hs-identifier hs-var">utxosUtxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Share (UTxO era) -&gt; Decoder s (UTxO era)
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s. Share (UTxO era) -&gt; Decoder s (UTxO era)
</span><span class="hs-identifier hs-var">decShareCBOR</span></span><span> </span><span class="annot"><span class="annottext">Share (UTxO era)
Share (UTxOState era)
</span><a href="#local-6989586621679604011"><span class="hs-identifier hs-var">credInterns</span></a></span><span>
</span><span id="line-337"></span><span>      </span><span id="local-6989586621679604013"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679604013"><span class="hs-identifier hs-var">utxosDeposited</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Coin
forall s. Decoder s Coin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-338"></span><span>      </span><span id="local-6989586621679604014"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679604014"><span class="hs-identifier hs-var">utxosFees</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Coin
forall s. Decoder s Coin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-339"></span><span>      </span><span class="hs-comment">-- TODO: implement proper sharing: https://github.com/input-output-hk/cardano-ledger/issues/3486</span><span>
</span><span id="line-340"></span><span>      </span><span id="local-6989586621679604015"><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679604015"><span class="hs-identifier hs-var">utxosGovState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s (GovState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-341"></span><span>      </span><span id="local-6989586621679604016"><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
</span><a href="#local-6989586621679604016"><span class="hs-identifier hs-var">utxosStakeDistr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Share (IncrementalStake (EraCrypto era))
-&gt; Decoder s (IncrementalStake (EraCrypto era))
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s.
Share (IncrementalStake (EraCrypto era))
-&gt; Decoder s (IncrementalStake (EraCrypto era))
</span><span class="hs-identifier hs-var">decShareCBOR</span></span><span> </span><span class="annot"><span class="annottext">Share (UTxOState era)
Share (IncrementalStake (EraCrypto era))
</span><a href="#local-6989586621679604011"><span class="hs-identifier hs-var">credInterns</span></a></span><span>
</span><span id="line-342"></span><span>      </span><span id="local-6989586621679604017"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679604017"><span class="hs-identifier hs-var">utxosDonation</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Decoder s Coin
forall s. Decoder s Coin
forall a s. DecCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decCBOR</span></span><span>
</span><span id="line-343"></span><span>      </span><span class="annot"><span class="annottext">UTxOState era -&gt; Decoder s (UTxOState era)
forall a. a -&gt; Decoder s a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Coin
GovState era
UTxO era
IncrementalStake (EraCrypto era)
utxosUtxo :: UTxO era
utxosDeposited :: Coin
utxosFees :: Coin
utxosGovState :: GovState era
utxosStakeDistr :: IncrementalStake (EraCrypto era)
utxosDonation :: Coin
utxosUtxo :: UTxO era
utxosDeposited :: Coin
utxosFees :: Coin
utxosGovState :: GovState era
utxosStakeDistr :: IncrementalStake (EraCrypto era)
utxosDonation :: Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxo"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602605"><span id="local-6989586621679604026"><span id="local-6989586621679604030"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602605"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602605"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602605"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621679604037"><span class="annot"><span class="annottext">toCBOR :: UTxOState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><span class="hs-identifier hs-var">toEraCBOR</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602605"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602607"><span id="local-6989586621679604046"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602607"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602607"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602607"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621679604053"><span class="annot"><span class="annottext">fromCBOR :: forall s. Decoder s (UTxOState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version -&gt; Decoder s (UTxOState era) -&gt; Decoder s (UTxOState era)
forall s a. Version -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">toPlainDecoder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><span class="hs-identifier hs-var">eraProtVerLow</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602607"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decoder s (UTxOState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602614"><span id="local-6989586621679604060"><span id="local-6989586621679604064"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602614"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602614"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602614"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679604071"><span class="annot"><span class="annottext">toJSON :: UTxOState era -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (UTxOState era -&gt; [Pair]) -&gt; UTxOState era -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; [Pair]
forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
UTxOState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toUTxOStatePairs"><span class="hs-identifier hs-var">toUTxOStatePairs</span></a></span><span>
</span><span id="line-353"></span><span>  </span><span id="local-6989586621679604077"><span class="annot"><span class="annottext">toEncoding :: UTxOState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (UTxOState era -&gt; Series) -&gt; UTxOState era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (UTxOState era -&gt; [Series]) -&gt; UTxOState era -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; [Series]
forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
UTxOState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toUTxOStatePairs"><span class="hs-identifier hs-var">toUTxOStatePairs</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span id="local-6989586621679602615"><span id="local-6989586621679602616"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toUTxOStatePairs"><span class="hs-identifier hs-type">toUTxOStatePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602615"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602615"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679602616"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602615"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679602616"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-357"></span><span id="toUTxOStatePairs"><span class="annot"><span class="annottext">toUTxOStatePairs :: forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
UTxOState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toUTxOStatePairs"><span class="hs-identifier hs-var hs-var">toUTxOStatePairs</span></a></span></span><span> </span><span id="local-6989586621679604104"><span class="annot"><span class="annottext">utxoState :: UTxOState era
</span><a href="#local-6989586621679604104"><span class="hs-identifier hs-var">utxoState</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">GovState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679604105"><span id="local-6989586621679604106"><span id="local-6989586621679604107"><span id="local-6989586621679604108"><span id="local-6989586621679604109"><span id="local-6989586621679604110"><span class="annot"><span class="annottext">Coin
GovState era
UTxO era
IncrementalStake (EraCrypto era)
utxosUtxo :: forall era. UTxOState era -&gt; UTxO era
utxosDeposited :: forall era. UTxOState era -&gt; Coin
utxosFees :: forall era. UTxOState era -&gt; Coin
utxosGovState :: forall era. UTxOState era -&gt; GovState era
utxosStakeDistr :: forall era. UTxOState era -&gt; IncrementalStake (EraCrypto era)
utxosDonation :: forall era. UTxOState era -&gt; Coin
utxosUtxo :: UTxO era
utxosDeposited :: Coin
utxosFees :: Coin
utxosGovState :: GovState era
utxosStakeDistr :: IncrementalStake (EraCrypto era)
utxosDonation :: Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxo"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679604104"><span class="hs-identifier hs-var">utxoState</span></a></span><span>
</span><span id="line-359"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;utxo&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; UTxO era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679604105"><span class="hs-identifier hs-var">utxosUtxo</span></a></span><span>
</span><span id="line-360"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deposited&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679604106"><span class="hs-identifier hs-var">utxosDeposited</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fees&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Coin -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679604107"><span class="hs-identifier hs-var">utxosFees</span></a></span><span>
</span><span id="line-362"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;ppups&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; GovState era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679604108"><span class="hs-identifier hs-var">utxosGovState</span></a></span><span>
</span><span id="line-363"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;stake&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; IncrementalStake (EraCrypto era) -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
</span><a href="#local-6989586621679604109"><span class="hs-identifier hs-var">utxosStakeDistr</span></a></span><span>
</span><span id="line-364"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="annot"><span class="hs-comment">-- | New Epoch state and environment</span></span><span>
</span><span id="line-367"></span><span class="hs-keyword">data</span><span> </span><span id="NewEpochState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-var">NewEpochState</span></a></span></span><span> </span><span id="local-6989586621679602620"><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NewEpochState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-var">NewEpochState</span></a></span></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="nesEL"><span class="annot"><span class="annottext">forall era. NewEpochState era -&gt; EpochNo
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEL"><span class="hs-identifier hs-var hs-var">nesEL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span>
</span><span id="line-369"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Last epoch</span></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nesBprev"><span class="annot"><span class="annottext">forall era. NewEpochState era -&gt; BlocksMade (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBprev"><span class="hs-identifier hs-var hs-var">nesBprev</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlocksMade</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Blocks made before current epoch</span></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nesBcur"><span class="annot"><span class="annottext">forall era. NewEpochState era -&gt; BlocksMade (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBcur"><span class="hs-identifier hs-var hs-var">nesBcur</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlocksMade</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Blocks made in current epoch</span></span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nesEs"><span class="annot"><span class="annottext">forall era. NewEpochState era -&gt; EpochState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEs"><span class="hs-identifier hs-var hs-var">nesEs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Epoch state before current</span></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nesRu"><span class="annot"><span class="annottext">forall era.
NewEpochState era -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesRu"><span class="hs-identifier hs-var hs-var">nesRu</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StrictMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.RewardUpdate.html#PulsingRewUpdate"><span class="hs-identifier hs-type">PulsingRewUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Possible reward update</span></span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nesPd"><span class="annot"><span class="annottext">forall era. NewEpochState era -&gt; PoolDistr (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesPd"><span class="hs-identifier hs-var hs-var">nesPd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PoolDistr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Stake distribution within the stake pool</span></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="stashedAVVMAddresses"><span class="annot"><span class="annottext">forall era. NewEpochState era -&gt; StashedAVVMAddresses era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#stashedAVVMAddresses"><span class="hs-identifier hs-var hs-var">stashedAVVMAddresses</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602620"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-comment">-- ^ AVVM addresses to be removed at the end of the Shelley era. Note that</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-comment">-- the existence of this field is a hack, related to the transition of UTxO</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-comment">-- to disk. We remove AVVM addresses from the UTxO on the Shelley/Allegra</span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-comment">-- boundary. However, by this point the UTxO will be moved to disk, and</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-comment">-- hence doing a scan of the UTxO for AVVM addresses will be expensive. Our</span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-comment">-- solution to this is to do a scan of the UTxO on the Byron/Shelley</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-comment">-- boundary (since Byron UTxO are still on disk), stash the results here,</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-comment">-- and then remove them at the Shelley/Allegra boundary.</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-comment">-- This is very much an awkward implementation hack, and hence we hide it</span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-comment">-- from as many places as possible.</span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679604120"><span id="local-6989586621679604122"><span class="annot"><span class="annottext">(forall x. NewEpochState era -&gt; Rep (NewEpochState era) x)
-&gt; (forall x. Rep (NewEpochState era) x -&gt; NewEpochState era)
-&gt; Generic (NewEpochState era)
forall x. Rep (NewEpochState era) x -&gt; NewEpochState era
forall x. NewEpochState era -&gt; Rep (NewEpochState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (NewEpochState era) x -&gt; NewEpochState era
forall era x. NewEpochState era -&gt; Rep (NewEpochState era) x
$cfrom :: forall era x. NewEpochState era -&gt; Rep (NewEpochState era) x
from :: forall x. NewEpochState era -&gt; Rep (NewEpochState era) x
$cto :: forall era x. Rep (NewEpochState era) x -&gt; NewEpochState era
to :: forall x. Rep (NewEpochState era) x -&gt; NewEpochState era
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="StashedAVVMAddresses"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-var">StashedAVVMAddresses</span></a></span></span><span> </span><span id="local-6989586621679604124"><span class="annot"><a href="#local-6989586621679604124"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>  </span><span id="StashedAVVMAddresses"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-var">StashedAVVMAddresses</span></a></span></span><span> </span><span id="local-6989586621679604125"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Era.html#ShelleyEra"><span class="hs-identifier hs-type">ShelleyEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679604125"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Era.html#ShelleyEra"><span class="hs-identifier hs-type">ShelleyEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679604125"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>  </span><span id="StashedAVVMAddresses"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-var">StashedAVVMAddresses</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span id="local-6989586621679604130"><span id="local-6989586621679604145"><span id="local-6989586621679604149"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602642"><span class="annot"><a href="#local-6989586621679602642"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602642"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-401"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602642"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602642"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-404"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602642"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span id="local-6989586621679604156"><span id="local-6989586621679604170"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602648"><span class="annot"><a href="#local-6989586621679602648"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602648"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602648"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602648"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602648"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-414"></span><span>  </span><span id="local-6989586621679602654"><span id="local-6989586621679604178"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602654"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602654"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602654"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-418"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602654"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-421"></span><span>  </span><span id="local-6989586621679602656"><span id="local-6989586621679604224"><span id="local-6989586621679604228"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602656"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602656"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602656"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-425"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602656"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-427"></span><span>  </span><span id="local-6989586621679604253"><span class="annot"><span class="annottext">encCBOR :: NewEpochState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span id="local-6989586621679604254"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679604254"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679604255"><span class="annot"><span class="annottext">BlocksMade (EraCrypto era)
</span><a href="#local-6989586621679604255"><span class="hs-identifier hs-var">bp</span></a></span></span><span> </span><span id="local-6989586621679604256"><span class="annot"><span class="annottext">BlocksMade (EraCrypto era)
</span><a href="#local-6989586621679604256"><span class="hs-identifier hs-var">bc</span></a></span></span><span> </span><span id="local-6989586621679604257"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679604257"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679604258"><span class="annot"><span class="annottext">StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><a href="#local-6989586621679604258"><span class="hs-identifier hs-var">ru</span></a></span></span><span> </span><span id="local-6989586621679604259"><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><a href="#local-6989586621679604259"><span class="hs-identifier hs-var">pd</span></a></span></span><span> </span><span id="local-6989586621679604260"><span class="annot"><span class="annottext">StashedAVVMAddresses era
</span><a href="#local-6989586621679604260"><span class="hs-identifier hs-var">av</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">7</span></span><span>
</span><span id="line-429"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679604254"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-430"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BlocksMade (EraCrypto era) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">BlocksMade (EraCrypto era)
</span><a href="#local-6989586621679604255"><span class="hs-identifier hs-var">bp</span></a></span><span>
</span><span id="line-431"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BlocksMade (EraCrypto era) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">BlocksMade (EraCrypto era)
</span><a href="#local-6989586621679604256"><span class="hs-identifier hs-var">bc</span></a></span><span>
</span><span id="line-432"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679604257"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-433"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (PulsingRewUpdate (EraCrypto era)) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><a href="#local-6989586621679604258"><span class="hs-identifier hs-var">ru</span></a></span><span>
</span><span id="line-434"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr (EraCrypto era) -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><a href="#local-6989586621679604259"><span class="hs-identifier hs-var">pd</span></a></span><span>
</span><span id="line-435"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">StashedAVVMAddresses era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">StashedAVVMAddresses era
</span><a href="#local-6989586621679604260"><span class="hs-identifier hs-var">av</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-438"></span><span>  </span><span id="local-6989586621679602662"><span id="local-6989586621679604270"><span id="local-6989586621679604274"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602662"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602662"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602662"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602662"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-444"></span><span>  </span><span id="local-6989586621679604292"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (NewEpochState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (NewEpochState era)
-&gt; Decoder s (NewEpochState era)
forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><span class="hs-identifier hs-var">decode</span></span><span> </span><span class="annot"><span class="annottext">(Decode ('Closed 'Dense) (NewEpochState era)
 -&gt; Decoder s (NewEpochState era))
-&gt; Decode ('Closed 'Dense) (NewEpochState era)
-&gt; Decoder s (NewEpochState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-446"></span><span>      </span><span class="annot"><span class="annottext">(EpochNo
 -&gt; BlocksMade (EraCrypto era)
 -&gt; BlocksMade (EraCrypto era)
 -&gt; EpochState era
 -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
 -&gt; PoolDistr (EraCrypto era)
 -&gt; StashedAVVMAddresses era
 -&gt; NewEpochState era)
-&gt; Decode
     ('Closed 'Dense)
     (EpochNo
      -&gt; BlocksMade (EraCrypto era)
      -&gt; BlocksMade (EraCrypto era)
      -&gt; EpochState era
      -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
      -&gt; PoolDistr (EraCrypto era)
      -&gt; StashedAVVMAddresses era
      -&gt; NewEpochState era)
forall t. t -&gt; Decode ('Closed 'Dense) t
</span><span class="hs-identifier hs-var">RecD</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
-&gt; BlocksMade (EraCrypto era)
-&gt; BlocksMade (EraCrypto era)
-&gt; EpochState era
-&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
-&gt; PoolDistr (EraCrypto era)
-&gt; StashedAVVMAddresses era
-&gt; NewEpochState era
forall era.
EpochNo
-&gt; BlocksMade (EraCrypto era)
-&gt; BlocksMade (EraCrypto era)
-&gt; EpochState era
-&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
-&gt; PoolDistr (EraCrypto era)
-&gt; StashedAVVMAddresses era
-&gt; NewEpochState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-var">NewEpochState</span></a></span><span>
</span><span id="line-447"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (EpochNo
   -&gt; BlocksMade (EraCrypto era)
   -&gt; BlocksMade (EraCrypto era)
   -&gt; EpochState era
   -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
   -&gt; PoolDistr (EraCrypto era)
   -&gt; StashedAVVMAddresses era
   -&gt; NewEpochState era)
-&gt; Decode ('Closed Any) EpochNo
-&gt; Decode
     ('Closed 'Dense)
     (BlocksMade (EraCrypto era)
      -&gt; BlocksMade (EraCrypto era)
      -&gt; EpochState era
      -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
      -&gt; PoolDistr (EraCrypto era)
      -&gt; StashedAVVMAddresses era
      -&gt; NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) EpochNo
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-448"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (BlocksMade (EraCrypto era)
   -&gt; BlocksMade (EraCrypto era)
   -&gt; EpochState era
   -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
   -&gt; PoolDistr (EraCrypto era)
   -&gt; StashedAVVMAddresses era
   -&gt; NewEpochState era)
-&gt; Decode ('Closed Any) (BlocksMade (EraCrypto era))
-&gt; Decode
     ('Closed 'Dense)
     (BlocksMade (EraCrypto era)
      -&gt; EpochState era
      -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
      -&gt; PoolDistr (EraCrypto era)
      -&gt; StashedAVVMAddresses era
      -&gt; NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (BlocksMade (EraCrypto era))
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-449"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (BlocksMade (EraCrypto era)
   -&gt; EpochState era
   -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
   -&gt; PoolDistr (EraCrypto era)
   -&gt; StashedAVVMAddresses era
   -&gt; NewEpochState era)
-&gt; Decode ('Closed Any) (BlocksMade (EraCrypto era))
-&gt; Decode
     ('Closed 'Dense)
     (EpochState era
      -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
      -&gt; PoolDistr (EraCrypto era)
      -&gt; StashedAVVMAddresses era
      -&gt; NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (BlocksMade (EraCrypto era))
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-450"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (EpochState era
   -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
   -&gt; PoolDistr (EraCrypto era)
   -&gt; StashedAVVMAddresses era
   -&gt; NewEpochState era)
-&gt; Decode ('Closed Any) (EpochState era)
-&gt; Decode
     ('Closed 'Dense)
     (StrictMaybe (PulsingRewUpdate (EraCrypto era))
      -&gt; PoolDistr (EraCrypto era)
      -&gt; StashedAVVMAddresses era
      -&gt; NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (EpochState era)
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-451"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (StrictMaybe (PulsingRewUpdate (EraCrypto era))
   -&gt; PoolDistr (EraCrypto era)
   -&gt; StashedAVVMAddresses era
   -&gt; NewEpochState era)
-&gt; Decode
     ('Closed Any) (StrictMaybe (PulsingRewUpdate (EraCrypto era)))
-&gt; Decode
     ('Closed 'Dense)
     (PoolDistr (EraCrypto era)
      -&gt; StashedAVVMAddresses era -&gt; NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode
  ('Closed Any) (StrictMaybe (PulsingRewUpdate (EraCrypto era)))
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-452"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (PoolDistr (EraCrypto era)
   -&gt; StashedAVVMAddresses era -&gt; NewEpochState era)
-&gt; Decode ('Closed Any) (PoolDistr (EraCrypto era))
-&gt; Decode
     ('Closed 'Dense) (StashedAVVMAddresses era -&gt; NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (PoolDistr (EraCrypto era))
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-453"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense) (StashedAVVMAddresses era -&gt; NewEpochState era)
-&gt; Decode ('Closed Any) (StashedAVVMAddresses era)
-&gt; Decode ('Closed 'Dense) (NewEpochState era)
forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><span class="hs-operator hs-var">&lt;!</span></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (StashedAVVMAddresses era)
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><span class="hs-identifier hs-var">From</span></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-456"></span><span>  </span><span id="local-6989586621679602679"><span id="local-6989586621679604302"><span id="local-6989586621679604306"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602679"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602679"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602679"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602679"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-459"></span><span>  </span><span id="local-6989586621679604313"><span class="annot"><span class="annottext">toCBOR :: NewEpochState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><span class="hs-identifier hs-var">toEraCBOR</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602679"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621679602681"><span id="local-6989586621679604323"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-463"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">FromCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679604330"><span class="annot"><span class="annottext">fromCBOR :: forall s. Decoder s (NewEpochState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t s. (Era era, DecCBOR t) =&gt; Decoder s t
</span><span class="hs-identifier hs-var">fromEraCBOR</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602681"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-468"></span><span>  </span><span id="local-6989586621679602686"><span id="local-6989586621679604337"><span id="local-6989586621679604341"><span id="local-6989586621679604347"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Era</span></span><span> </span><span class="annot"><a href="#local-6989586621679602686"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlocksMade</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602686"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602686"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.RewardUpdate.html#PulsingRewUpdate"><span class="hs-identifier hs-type">PulsingRewUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602686"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602686"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602686"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="annot"><span class="hs-comment">-- | The state associated with a 'Ledger'.</span></span><span>
</span><span id="line-477"></span><span class="hs-keyword">data</span><span> </span><span id="LedgerState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-var">LedgerState</span></a></span></span><span> </span><span id="local-6989586621679602687"><span class="annot"><a href="#local-6989586621679602687"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LedgerState"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-var">LedgerState</span></a></span></span><span>
</span><span id="line-478"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="lsUTxOState"><span class="annot"><span class="annottext">forall era. LedgerState era -&gt; UTxOState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOState"><span class="hs-identifier hs-var hs-var">lsUTxOState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602687"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The current unspent transaction outputs.</span></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="lsCertState"><span class="annot"><span class="annottext">forall era. LedgerState era -&gt; CertState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertState"><span class="hs-identifier hs-var hs-var">lsCertState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CertState</span></span><span> </span><span class="annot"><a href="#local-6989586621679602687"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679604400"><span id="local-6989586621679604402"><span class="annot"><span class="annottext">(forall x. LedgerState era -&gt; Rep (LedgerState era) x)
-&gt; (forall x. Rep (LedgerState era) x -&gt; LedgerState era)
-&gt; Generic (LedgerState era)
forall x. Rep (LedgerState era) x -&gt; LedgerState era
forall x. LedgerState era -&gt; Rep (LedgerState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (LedgerState era) x -&gt; LedgerState era
forall era x. LedgerState era -&gt; Rep (LedgerState era) x
$cfrom :: forall era x. LedgerState era -&gt; Rep (LedgerState era) x
from :: forall x. LedgerState era -&gt; Rep (LedgerState era) x
$cto :: forall era x. Rep (LedgerState era) x -&gt; LedgerState era
to :: forall x. Rep (LedgerState era) x -&gt; LedgerState era
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Generics.html#Generic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span id="local-6989586621679604407"><span id="local-6989586621679604413"><span id="local-6989586621679604416"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602358"><span class="annot"><a href="#local-6989586621679602358"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602358"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602358"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-488"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602358"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span id="local-6989586621679604421"><span id="local-6989586621679604426"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679602363"><span class="annot"><a href="#local-6989586621679602363"><span class="hs-keyword hs-type">stock</span></a></span></span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-491"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602363"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602363"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-494"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602363"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-497"></span><span>  </span><span id="local-6989586621679602375"><span id="local-6989586621679604431"><span id="local-6989586621679604434"><span id="local-6989586621679604440"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602375"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-498"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602375"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602375"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-503"></span><span>  </span><span id="local-6989586621679602380"><span id="local-6989586621679604478"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602380"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-504"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602380"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-506"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602380"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621679602386"><span id="local-6989586621679604502"><span id="local-6989586621679604505"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602386"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-510"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602386"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-512"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">EncCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602386"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-514"></span><span>  </span><span id="local-6989586621679604514"><span class="annot"><span class="annottext">encCBOR :: LedgerState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679604515"><span class="annot"><span class="annottext">UTxOState era
lsUTxOState :: forall era. LedgerState era -&gt; UTxOState era
lsUTxOState :: UTxOState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOState"><span class="hs-identifier hs-var hs-var">lsUTxOState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679604516"><span class="annot"><span class="annottext">CertState era
lsCertState :: forall era. LedgerState era -&gt; CertState era
lsCertState :: CertState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertState"><span class="hs-identifier hs-var hs-var">lsCertState</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-515"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><span class="hs-identifier hs-var">encodeListLen</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span>
</span><span id="line-516"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679604516"><span class="hs-identifier hs-var">lsCertState</span></a></span><span> </span><span class="hs-comment">-- encode delegation state first to improve sharing</span><span>
</span><span id="line-517"></span><span>      </span><span class="annot"><span class="annottext">Encoding -&gt; Encoding -&gt; Encoding
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; Encoding
forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encCBOR</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679604515"><span class="hs-identifier hs-var">lsUTxOState</span></a></span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-520"></span><span>  </span><span id="local-6989586621679602425"><span id="local-6989586621679604523"><span id="local-6989586621679604526"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602425"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-521"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602425"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-522"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-523"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">DecShareCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602425"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-525"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-526"></span><span>    </span><span id="Share"><span class="annot"><span class="hs-identifier hs-var">Share</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602425"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-527"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602425"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Interns</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyHash</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">StakePool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602425"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>  </span><span id="local-6989586621679604551"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s.
StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-531"></span><span>    </span><span class="annot"><span class="annottext">Text
-&gt; (LedgerState era -&gt; Int)
-&gt; StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
-&gt; StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><span class="hs-identifier hs-var">decodeRecordNamedT</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LedgerState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LedgerState era -&gt; Int
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
 -&gt; StateT (Share (LedgerState era)) (Decoder s) (LedgerState era))
-&gt; StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
-&gt; StateT (Share (LedgerState era)) (Decoder s) (LedgerState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-532"></span><span>      </span><span id="local-6989586621679604552"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679604552"><span class="hs-identifier hs-var">lsCertState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Decoder s)
  (CertState era)
StateT (Share (CertState era)) (Decoder s) (CertState era)
forall s.
StateT (Share (CertState era)) (Decoder s) (CertState era)
forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><span class="hs-identifier hs-var">decSharePlusCBOR</span></span><span>
</span><span id="line-533"></span><span>      </span><span id="local-6989586621679604553"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679604553"><span class="hs-identifier hs-var">lsUTxOState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (UTxOState era))
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (UTxOState era)
forall b bs s.
DecShareCBOR b =&gt;
SimpleGetter bs (Share b) -&gt; StateT bs (Decoder s) b
</span><span class="hs-identifier hs-var">decShareLensCBOR</span></span><span> </span><span class="annot"><span class="annottext">(Share (UTxOState era) -&gt; Const r (Share (UTxOState era)))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Const
     r
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
(Interns (Credential 'Staking (EraCrypto era))
 -&gt; Const r (Interns (Credential 'Staking (EraCrypto era))))
-&gt; (Interns (Credential 'Staking (EraCrypto era)),
    Interns (KeyHash 'StakePool (EraCrypto era)))
-&gt; Const
     r
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
SimpleGetter
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Share (UTxOState era))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
Lens
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)),
   Interns (KeyHash 'StakePool (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)))
  (Interns (Credential 'Staking (EraCrypto era)))
</span><span class="hs-identifier hs-var">_1</span></span><span>
</span><span id="line-534"></span><span>      </span><span class="annot"><span class="annottext">LedgerState era
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     (LedgerState era)
forall a.
a
-&gt; StateT
     (Interns (Credential 'Staking (EraCrypto era)),
      Interns (KeyHash 'StakePool (EraCrypto era)))
     (Decoder s)
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">UTxOState era
lsUTxOState :: UTxOState era
lsUTxOState :: UTxOState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOState"><span class="hs-identifier hs-var hs-var">lsUTxOState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CertState era
lsCertState :: CertState era
lsCertState :: CertState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertState"><span class="hs-identifier hs-var hs-var">lsCertState</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602722"><span id="local-6989586621679604566"><span id="local-6989586621679604570"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602722"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602722"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602722"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-537"></span><span>  </span><span id="local-6989586621679604577"><span class="annot"><span class="annottext">toCBOR :: LedgerState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><span class="hs-identifier hs-var">toEraCBOR</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602722"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602724"><span id="local-6989586621679604586"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602724"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602724"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromCBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602724"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-540"></span><span>  </span><span id="local-6989586621679604593"><span class="annot"><span class="annottext">fromCBOR :: forall s. Decoder s (LedgerState era)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Decoder s (LedgerState era) -&gt; Decoder s (LedgerState era)
forall s a. Version -&gt; Decoder s a -&gt; Decoder s a
</span><span class="hs-identifier hs-var">toPlainDecoder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><span class="hs-identifier hs-var">eraProtVerLow</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679602724"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decoder s (LedgerState era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><span class="hs-identifier hs-var">decNoShareCBOR</span></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602480"><span id="local-6989586621679604599"><span id="local-6989586621679604602"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602480"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602480"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602480"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-543"></span><span>  </span><span id="local-6989586621679604609"><span class="annot"><span class="annottext">toJSON :: LedgerState era -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value)
-&gt; (LedgerState era -&gt; [Pair]) -&gt; LedgerState era -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState era -&gt; [Pair]
forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
LedgerState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toLedgerStatePairs"><span class="hs-identifier hs-var">toLedgerStatePairs</span></a></span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621679604615"><span class="annot"><span class="annottext">toEncoding :: LedgerState era -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">(Series -&gt; Encoding)
-&gt; (LedgerState era -&gt; Series) -&gt; LedgerState era -&gt; Encoding
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Series] -&gt; Series
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">([Series] -&gt; Series)
-&gt; (LedgerState era -&gt; [Series]) -&gt; LedgerState era -&gt; Series
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState era -&gt; [Series]
forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
LedgerState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toLedgerStatePairs"><span class="hs-identifier hs-var">toLedgerStatePairs</span></a></span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span id="local-6989586621679602727"><span id="local-6989586621679602728"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toLedgerStatePairs"><span class="hs-identifier hs-type">toLedgerStatePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-547"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraTxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602727"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602727"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679602728"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602727"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679602728"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-548"></span><span id="toLedgerStatePairs"><span class="annot"><span class="annottext">toLedgerStatePairs :: forall era a.
(EraTxOut era, EraGov era, KeyValue a) =&gt;
LedgerState era -&gt; [a]
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#toLedgerStatePairs"><span class="hs-identifier hs-var hs-var">toLedgerStatePairs</span></a></span></span><span> </span><span id="local-6989586621679604628"><span class="annot"><span class="annottext">ls :: LedgerState era
</span><a href="#local-6989586621679604628"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-549"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679604629"><span id="local-6989586621679604630"><span class="annot"><span class="annottext">CertState era
UTxOState era
lsUTxOState :: forall era. LedgerState era -&gt; UTxOState era
lsCertState :: forall era. LedgerState era -&gt; CertState era
lsUTxOState :: UTxOState era
lsCertState :: CertState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOState"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679604628"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-550"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;utxoState&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; UTxOState era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679604629"><span class="hs-identifier hs-var">lsUTxOState</span></a></span><span>
</span><span id="line-551"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;delegationState&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; CertState era -&gt; a
forall v. ToJSON v =&gt; Key -&gt; v -&gt; a
forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679604630"><span class="hs-identifier hs-var">lsCertState</span></a></span><span>
</span><span id="line-552"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span class="hs-comment">-- ====================================================</span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- Default instances</span><span>
</span><span id="line-558"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602733"><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602733"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602733"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-561"></span><span>  </span><span id="local-6989586621679604647"><span class="annot"><span class="annottext">def :: UTxOState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxO era
-&gt; Coin
-&gt; Coin
-&gt; GovState era
-&gt; IncrementalStake (EraCrypto era)
-&gt; Coin
-&gt; UTxOState era
forall era.
UTxO era
-&gt; Coin
-&gt; Coin
-&gt; GovState era
-&gt; IncrementalStake (EraCrypto era)
-&gt; Coin
-&gt; UTxOState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-var">UTxOState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">GovState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-564"></span><span>  </span><span id="local-6989586621679602736"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602736"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-565"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602736"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-566"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-567"></span><span>  </span><span id="local-6989586621679604658"><span class="annot"><span class="annottext">def :: EpochState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AccountState
-&gt; LedgerState era
-&gt; SnapShots (EraCrypto era)
-&gt; NonMyopic (EraCrypto era)
-&gt; EpochState era
forall era.
AccountState
-&gt; LedgerState era
-&gt; SnapShots (EraCrypto era)
-&gt; NonMyopic (EraCrypto era)
-&gt; EpochState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-var">EpochState</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602740"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602740"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602740"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-570"></span><span>  </span><span id="local-6989586621679604665"><span class="annot"><span class="annottext">def :: LedgerState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; CertState era -&gt; LedgerState era
forall era. UTxOState era -&gt; CertState era -&gt; LedgerState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-var">LedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">CertState era
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621679604667"><span class="annot"><span class="annottext">def :: AccountState
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; AccountState
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-var">AccountState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><span class="hs-identifier hs-var">Coin</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><span class="hs-identifier hs-var">Coin</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span class="hs-comment">-- =============================================================</span><span>
</span><span id="line-576"></span><span class="hs-comment">-- TreeDiff ToExpr instances</span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679604670"><span id="local-6989586621679604677"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span></span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-581"></span><span>  </span><span id="local-6989586621679602780"><span id="local-6989586621679604721"><span id="local-6989586621679604728"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602780"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PParams</span></span><span> </span><span class="annot"><a href="#local-6989586621679602780"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602780"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602780"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-586"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602780"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-589"></span><span>  </span><span id="local-6989586621679602779"><span id="local-6989586621679604801"><span id="local-6989586621679604807"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PParams</span></span><span> </span><span class="annot"><a href="#local-6989586621679602779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-593"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-596"></span><span>  </span><span id="local-6989586621679602784"><span id="local-6989586621679604854"><span id="local-6989586621679604860"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-599"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-602"></span><span>  </span><span id="local-6989586621679602787"><span id="local-6989586621679604890"><span id="local-6989586621679604896"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679602787"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602787"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-605"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602787"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679602790"><span id="local-6989586621679604955"><span id="local-6989586621679604961"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602790"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="hs-comment">-- =============================================================</span><span>
</span><span id="line-610"></span><span class="hs-comment">-- Lenses for types found inside NewEpochState and its fields</span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="hs-comment">-- ==========================================</span><span>
</span><span id="line-613"></span><span class="hs-comment">-- NewEpochState</span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span id="local-6989586621679602797"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesPdL"><span class="hs-identifier hs-type">nesPdL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602797"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PoolDistr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602797"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-616"></span><span id="nesPdL"><span class="annot"><span class="annottext">nesPdL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(PoolDistr (EraCrypto era) -&gt; f (PoolDistr (EraCrypto era)))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesPdL"><span class="hs-identifier hs-var hs-var">nesPdL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; PoolDistr (EraCrypto era))
-&gt; (NewEpochState era
    -&gt; PoolDistr (EraCrypto era) -&gt; NewEpochState era)
-&gt; Lens
     (NewEpochState era)
     (NewEpochState era)
     (PoolDistr (EraCrypto era))
     (PoolDistr (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; PoolDistr (EraCrypto era)
forall era. NewEpochState era -&gt; PoolDistr (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesPd"><span class="hs-identifier hs-var">nesPd</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679604997"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679604997"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679604998"><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><a href="#local-6989586621679604998"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679604997"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesPd"><span class="hs-identifier hs-var">nesPd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679604998"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span class="hs-comment">{- Callled nesEpochStateL elsewhere -}</span><span>
</span><span id="line-619"></span><span id="local-6989586621679602804"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-type">nesEsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602804"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602804"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-620"></span><span id="nesEsL"><span class="annot"><span class="annottext">nesEsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var hs-var">nesEsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; EpochState era)
-&gt; (NewEpochState era -&gt; EpochState era -&gt; NewEpochState era)
-&gt; Lens
     (NewEpochState era)
     (NewEpochState era)
     (EpochState era)
     (EpochState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; EpochState era
forall era. NewEpochState era -&gt; EpochState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEs"><span class="hs-identifier hs-var">nesEs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605002"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605002"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605003"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605003"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605002"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEs"><span class="hs-identifier hs-var">nesEs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605003"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span id="local-6989586621679602807"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#unifiedL"><span class="hs-identifier hs-type">unifiedL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602807"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602807"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-623"></span><span id="unifiedL"><span class="annot"><span class="annottext">unifiedL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#unifiedL"><span class="hs-identifier hs-var hs-var">unifiedL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; f (EpochState era))
 -&gt; NewEpochState era -&gt; f (NewEpochState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; EpochState era -&gt; f (EpochState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; NewEpochState era
-&gt; f (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; f (CertState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; CertState era -&gt; f (CertState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; f (DState era))
-&gt; CertState era -&gt; f (CertState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(DState era -&gt; f (DState era))
-&gt; CertState era -&gt; f (CertState era)
</span><span class="hs-identifier hs-var">certDStateL</span></span><span> </span><span class="annot"><span class="annottext">((DState era -&gt; f (DState era))
 -&gt; CertState era -&gt; f (CertState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; DState era -&gt; f (DState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; CertState era
-&gt; f (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
</span><span class="hs-identifier hs-var">dsUnifiedL</span></span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span id="local-6989586621679602818"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-type">nesELL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602818"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span></span><span>
</span><span id="line-626"></span><span id="nesELL"><span class="annot"><span class="annottext">nesELL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var hs-var">nesELL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; EpochNo)
-&gt; (NewEpochState era -&gt; EpochNo -&gt; NewEpochState era)
-&gt; Lens (NewEpochState era) (NewEpochState era) EpochNo EpochNo
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; EpochNo
forall era. NewEpochState era -&gt; EpochNo
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEL"><span class="hs-identifier hs-var">nesEL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605016"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605016"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605017"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679605017"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605016"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEL"><span class="hs-identifier hs-var">nesEL</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605017"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span id="local-6989586621679602821"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBprevL"><span class="hs-identifier hs-type">nesBprevL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602821"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyHash</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">StakePool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602821"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-bignum-1.3/src/GHC.Num.Natural.html#Natural"><span class="hs-identifier hs-type">Natural</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-629"></span><span id="nesBprevL"><span class="annot"><span class="annottext">nesBprevL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (KeyHash 'StakePool (EraCrypto era)) Natural
 -&gt; f (Map (KeyHash 'StakePool (EraCrypto era)) Natural))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBprevL"><span class="hs-identifier hs-var hs-var">nesBprevL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era
 -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural)
-&gt; (NewEpochState era
    -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural
    -&gt; NewEpochState era)
-&gt; Lens
     (NewEpochState era)
     (NewEpochState era)
     (Map (KeyHash 'StakePool (EraCrypto era)) Natural)
     (Map (KeyHash 'StakePool (EraCrypto era)) Natural)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlocksMade (EraCrypto era)
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural
forall c. BlocksMade c -&gt; Map (KeyHash 'StakePool c) Natural
</span><span class="hs-identifier hs-var">unBlocksMade</span></span><span> </span><span class="annot"><span class="annottext">(BlocksMade (EraCrypto era)
 -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural)
-&gt; (NewEpochState era -&gt; BlocksMade (EraCrypto era))
-&gt; NewEpochState era
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; BlocksMade (EraCrypto era)
forall era. NewEpochState era -&gt; BlocksMade (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBprev"><span class="hs-identifier hs-var">nesBprev</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605022"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605022"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605023"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Natural
</span><a href="#local-6989586621679605023"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605022"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBprev"><span class="hs-identifier hs-var">nesBprev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlocksMade</span></span><span> </span><span class="annot"><a href="#local-6989586621679605023"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span>
</span><span id="line-631"></span><span id="local-6989586621679605025"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBcurL"><span class="hs-identifier hs-type">nesBcurL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyHash</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">StakePool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679605025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-bignum-1.3/src/GHC.Num.Natural.html#Natural"><span class="hs-identifier hs-type">Natural</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-632"></span><span id="nesBcurL"><span class="annot"><span class="annottext">nesBcurL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (KeyHash 'StakePool (EraCrypto era)) Natural
 -&gt; f (Map (KeyHash 'StakePool (EraCrypto era)) Natural))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBcurL"><span class="hs-identifier hs-var hs-var">nesBcurL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era
 -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural)
-&gt; (NewEpochState era
    -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural
    -&gt; NewEpochState era)
-&gt; Lens
     (NewEpochState era)
     (NewEpochState era)
     (Map (KeyHash 'StakePool (EraCrypto era)) Natural)
     (Map (KeyHash 'StakePool (EraCrypto era)) Natural)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlocksMade (EraCrypto era)
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural
forall c. BlocksMade c -&gt; Map (KeyHash 'StakePool c) Natural
</span><span class="hs-identifier hs-var">unBlocksMade</span></span><span> </span><span class="annot"><span class="annottext">(BlocksMade (EraCrypto era)
 -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural)
-&gt; (NewEpochState era -&gt; BlocksMade (EraCrypto era))
-&gt; NewEpochState era
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Natural
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; BlocksMade (EraCrypto era)
forall era. NewEpochState era -&gt; BlocksMade (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBcur"><span class="hs-identifier hs-var">nesBcur</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605029"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605029"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605030"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Natural
</span><a href="#local-6989586621679605030"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605029"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesBcur"><span class="hs-identifier hs-var">nesBcur</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BlocksMade</span></span><span> </span><span class="annot"><a href="#local-6989586621679605030"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-633"></span><span>
</span><span id="line-634"></span><span id="local-6989586621679602828"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesRuL"><span class="hs-identifier hs-type">nesRuL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602828"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StrictMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.RewardUpdate.html#PulsingRewUpdate"><span class="hs-identifier hs-type">PulsingRewUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602828"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-635"></span><span id="nesRuL"><span class="annot"><span class="annottext">nesRuL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe (PulsingRewUpdate (EraCrypto era))
 -&gt; f (StrictMaybe (PulsingRewUpdate (EraCrypto era))))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesRuL"><span class="hs-identifier hs-var hs-var">nesRuL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era
 -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era)))
-&gt; (NewEpochState era
    -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
    -&gt; NewEpochState era)
-&gt; Lens
     (NewEpochState era)
     (NewEpochState era)
     (StrictMaybe (PulsingRewUpdate (EraCrypto era)))
     (StrictMaybe (PulsingRewUpdate (EraCrypto era)))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
forall era.
NewEpochState era -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesRu"><span class="hs-identifier hs-var">nesRu</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605034"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605034"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605035"><span class="annot"><span class="annottext">StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><a href="#local-6989586621679605035"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605034"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesRu"><span class="hs-identifier hs-var">nesRu</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605035"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span id="local-6989586621679602831"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesStashedAVVMAddressesL"><span class="hs-identifier hs-type">nesStashedAVVMAddressesL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602831"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#StashedAVVMAddresses"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602831"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-638"></span><span id="nesStashedAVVMAddressesL"><span class="annot"><span class="annottext">nesStashedAVVMAddressesL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(StashedAVVMAddresses era -&gt; f (StashedAVVMAddresses era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesStashedAVVMAddressesL"><span class="hs-identifier hs-var hs-var">nesStashedAVVMAddressesL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; StashedAVVMAddresses era)
-&gt; (NewEpochState era
    -&gt; StashedAVVMAddresses era -&gt; NewEpochState era)
-&gt; Lens
     (NewEpochState era)
     (NewEpochState era)
     (StashedAVVMAddresses era)
     (StashedAVVMAddresses era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; StashedAVVMAddresses era
forall era. NewEpochState era -&gt; StashedAVVMAddresses era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#stashedAVVMAddresses"><span class="hs-identifier hs-var">stashedAVVMAddresses</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605039"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605039"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605040"><span class="annot"><span class="annottext">StashedAVVMAddresses era
</span><a href="#local-6989586621679605040"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605039"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#stashedAVVMAddresses"><span class="hs-identifier hs-var">stashedAVVMAddresses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605040"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span class="hs-comment">-- For backward compatibility</span><span>
</span><span id="line-641"></span><span id="local-6989586621679605041"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEpochStateL"><span class="hs-identifier hs-type">nesEpochStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605041"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605041"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-642"></span><span id="nesEpochStateL"><span class="annot"><span class="annottext">nesEpochStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEpochStateL"><span class="hs-identifier hs-var hs-var">nesEpochStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; EpochState era)
-&gt; (NewEpochState era -&gt; EpochState era -&gt; NewEpochState era)
-&gt; forall {f :: * -&gt; *}.
   Functor f =&gt;
   (EpochState era -&gt; f (EpochState era))
   -&gt; NewEpochState era -&gt; f (NewEpochState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState era -&gt; EpochState era
forall era. NewEpochState era -&gt; EpochState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEs"><span class="hs-identifier hs-var">nesEs</span></a></span><span> </span><span class="annot"><span class="annottext">((NewEpochState era -&gt; EpochState era -&gt; NewEpochState era)
 -&gt; forall {f :: * -&gt; *}.
    Functor f =&gt;
    (EpochState era -&gt; f (EpochState era))
    -&gt; NewEpochState era -&gt; f (NewEpochState era))
-&gt; (NewEpochState era -&gt; EpochState era -&gt; NewEpochState era)
-&gt; forall {f :: * -&gt; *}.
   Functor f =&gt;
   (EpochState era -&gt; f (EpochState era))
   -&gt; NewEpochState era -&gt; f (NewEpochState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679605045"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605045"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605046"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605046"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679605045"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEs"><span class="hs-identifier hs-var">nesEs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605046"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="hs-comment">-- ===================================================</span><span>
</span><span id="line-645"></span><span class="hs-comment">-- EpochState</span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span id="local-6989586621679602837"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountStateL"><span class="hs-identifier hs-type">esAccountStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602837"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span></span><span>
</span><span id="line-648"></span><span id="esAccountStateL"><span class="annot"><span class="annottext">esAccountStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(AccountState -&gt; f AccountState)
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountStateL"><span class="hs-identifier hs-var hs-var">esAccountStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; AccountState)
-&gt; (EpochState era -&gt; AccountState -&gt; EpochState era)
-&gt; Lens (EpochState era) (EpochState era) AccountState AccountState
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; AccountState
forall era. EpochState era -&gt; AccountState
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountState"><span class="hs-identifier hs-var">esAccountState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605050"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605050"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605051"><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679605051"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605050"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountState"><span class="hs-identifier hs-var">esAccountState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605051"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>
</span><span id="line-650"></span><span id="local-6989586621679602840"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshotsL"><span class="hs-identifier hs-type">esSnapshotsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602840"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SnapShots</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602840"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-651"></span><span id="esSnapshotsL"><span class="annot"><span class="annottext">esSnapshotsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era)))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshotsL"><span class="hs-identifier hs-var hs-var">esSnapshotsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; SnapShots (EraCrypto era))
-&gt; (EpochState era -&gt; SnapShots (EraCrypto era) -&gt; EpochState era)
-&gt; Lens
     (EpochState era)
     (EpochState era)
     (SnapShots (EraCrypto era))
     (SnapShots (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; SnapShots (EraCrypto era)
forall era. EpochState era -&gt; SnapShots (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshots"><span class="hs-identifier hs-var">esSnapshots</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605055"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605055"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605056"><span class="annot"><span class="annottext">SnapShots (EraCrypto era)
</span><a href="#local-6989586621679605056"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605055"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshots"><span class="hs-identifier hs-var">esSnapshots</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605056"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>
</span><span id="line-653"></span><span id="local-6989586621679602811"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-type">esLStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602811"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602811"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-654"></span><span id="esLStateL"><span class="annot"><span class="annottext">esLStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var hs-var">esLStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; LedgerState era)
-&gt; (EpochState era -&gt; LedgerState era -&gt; EpochState era)
-&gt; Lens
     (EpochState era)
     (EpochState era)
     (LedgerState era)
     (LedgerState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; LedgerState era
forall era. EpochState era -&gt; LedgerState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLState"><span class="hs-identifier hs-var">esLState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605059"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605059"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605060"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679605060"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605059"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLState"><span class="hs-identifier hs-var">esLState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605060"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span id="local-6989586621679602845"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopicL"><span class="hs-identifier hs-type">esNonMyopicL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.PoolRank.html#NonMyopic"><span class="hs-identifier hs-type">NonMyopic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-657"></span><span id="esNonMyopicL"><span class="annot"><span class="annottext">esNonMyopicL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(NonMyopic (EraCrypto era) -&gt; f (NonMyopic (EraCrypto era)))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopicL"><span class="hs-identifier hs-var hs-var">esNonMyopicL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; NonMyopic (EraCrypto era))
-&gt; (EpochState era -&gt; NonMyopic (EraCrypto era) -&gt; EpochState era)
-&gt; Lens
     (EpochState era)
     (EpochState era)
     (NonMyopic (EraCrypto era))
     (NonMyopic (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">EpochState era -&gt; NonMyopic (EraCrypto era)
forall era. EpochState era -&gt; NonMyopic (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopic"><span class="hs-identifier hs-var">esNonMyopic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605064"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605064"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605065"><span class="annot"><span class="annottext">NonMyopic (EraCrypto era)
</span><a href="#local-6989586621679605065"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679605064"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esNonMyopic"><span class="hs-identifier hs-var">esNonMyopic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605065"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span id="local-6989586621679602848"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-type">curPParamsEpochStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602848"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602848"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PParams</span></span><span> </span><span class="annot"><a href="#local-6989586621679602848"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-660"></span><span id="curPParamsEpochStateL"><span class="annot"><span class="annottext">curPParamsEpochStateL :: forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var hs-var">curPParamsEpochStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((PParams era -&gt; f (PParams era))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (PParams era -&gt; f (PParams era))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((UTxOState era -&gt; f (UTxOState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((PParams era -&gt; f (PParams era))
    -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; (PParams era -&gt; f (PParams era))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var">utxosGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; f (GovState era))
 -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; ((PParams era -&gt; f (PParams era))
    -&gt; GovState era -&gt; f (GovState era))
-&gt; (PParams era -&gt; f (PParams era))
-&gt; UTxOState era
-&gt; f (UTxOState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; f (PParams era))
-&gt; GovState era -&gt; f (GovState era)
forall era. EraGov era =&gt; Lens' (GovState era) (PParams era)
Lens' (GovState era) (PParams era)
</span><a href="Cardano.Ledger.Shelley.Governance.html#curPParamsGovStateL"><span class="hs-identifier hs-var">curPParamsGovStateL</span></a></span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span id="local-6989586621679605077"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#prevPParamsEpochStateL"><span class="hs-identifier hs-type">prevPParamsEpochStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605077"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605077"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PParams</span></span><span> </span><span class="annot"><a href="#local-6989586621679605077"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-663"></span><span id="prevPParamsEpochStateL"><span class="annot"><span class="annottext">prevPParamsEpochStateL :: forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#prevPParamsEpochStateL"><span class="hs-identifier hs-var hs-var">prevPParamsEpochStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((PParams era -&gt; f (PParams era))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (PParams era -&gt; f (PParams era))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((UTxOState era -&gt; f (UTxOState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((PParams era -&gt; f (PParams era))
    -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; (PParams era -&gt; f (PParams era))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var">utxosGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; f (GovState era))
 -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; ((PParams era -&gt; f (PParams era))
    -&gt; GovState era -&gt; f (GovState era))
-&gt; (PParams era -&gt; f (PParams era))
-&gt; UTxOState era
-&gt; f (UTxOState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; f (PParams era))
-&gt; GovState era -&gt; f (GovState era)
forall era. EraGov era =&gt; Lens' (GovState era) (PParams era)
Lens' (GovState era) (PParams era)
</span><a href="Cardano.Ledger.Shelley.Governance.html#prevPParamsGovStateL"><span class="hs-identifier hs-var">prevPParamsGovStateL</span></a></span><span>
</span><span id="line-664"></span><span>
</span><span id="line-665"></span><span class="hs-comment">-- ==========================================</span><span>
</span><span id="line-666"></span><span class="hs-comment">-- AccountState</span><span>
</span><span id="line-667"></span><span>
</span><span id="line-668"></span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasuryL"><span class="hs-identifier hs-type">asTreasuryL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-669"></span><span id="asTreasuryL"><span class="annot"><span class="annottext">asTreasuryL :: Lens' AccountState Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasuryL"><span class="hs-identifier hs-var hs-var">asTreasuryL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AccountState -&gt; Coin)
-&gt; (AccountState -&gt; Coin -&gt; AccountState)
-&gt; Lens' AccountState Coin
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">AccountState -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasury"><span class="hs-identifier hs-var">asTreasury</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605090"><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679605090"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605091"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605091"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679605090"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasury"><span class="hs-identifier hs-var">asTreasury</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605091"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>
</span><span id="line-671"></span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asReservesL"><span class="hs-identifier hs-type">asReservesL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span>
</span><span id="line-672"></span><span id="asReservesL"><span class="annot"><span class="annottext">asReservesL :: Lens' AccountState Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asReservesL"><span class="hs-identifier hs-var hs-var">asReservesL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AccountState -&gt; Coin)
-&gt; (AccountState -&gt; Coin -&gt; AccountState)
-&gt; Lens' AccountState Coin
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">AccountState -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asReserves"><span class="hs-identifier hs-var">asReserves</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605095"><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679605095"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679605096"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605096"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621679605095"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asReserves"><span class="hs-identifier hs-var">asReserves</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605096"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span class="hs-comment">-- ====================================================</span><span>
</span><span id="line-675"></span><span class="hs-comment">-- LedgerState</span><span>
</span><span id="line-676"></span><span>
</span><span id="line-677"></span><span id="local-6989586621679602852"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-type">lsUTxOStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602852"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602852"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-678"></span><span id="lsUTxOStateL"><span class="annot"><span class="annottext">lsUTxOStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var hs-var">lsUTxOStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; UTxOState era)
-&gt; (LedgerState era -&gt; UTxOState era -&gt; LedgerState era)
-&gt; Lens
     (LedgerState era) (LedgerState era) (UTxOState era) (UTxOState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era -&gt; UTxOState era
forall era. LedgerState era -&gt; UTxOState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOState"><span class="hs-identifier hs-var">lsUTxOState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605099"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679605099"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605100"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605100"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679605099"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOState"><span class="hs-identifier hs-var">lsUTxOState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605100"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span id="local-6989586621679602812"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-type">lsCertStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#LedgerState"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602812"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CertState</span></span><span> </span><span class="annot"><a href="#local-6989586621679602812"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-681"></span><span id="lsCertStateL"><span class="annot"><span class="annottext">lsCertStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var hs-var">lsCertStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; CertState era)
-&gt; (LedgerState era -&gt; CertState era -&gt; LedgerState era)
-&gt; Lens
     (LedgerState era) (LedgerState era) (CertState era) (CertState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">LedgerState era -&gt; CertState era
forall era. LedgerState era -&gt; CertState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertState"><span class="hs-identifier hs-var">lsCertState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605103"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679605103"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605104"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679605104"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679605103"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertState"><span class="hs-identifier hs-var">lsCertState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605104"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span class="hs-comment">-- ================ UTxOState ===========================</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span id="local-6989586621679602862"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxoL"><span class="hs-identifier hs-type">utxosUtxoL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602862"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="annot"><a href="#local-6989586621679602862"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-686"></span><span id="utxosUtxoL"><span class="annot"><span class="annottext">utxosUtxoL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxO era -&gt; f (UTxO era)) -&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxoL"><span class="hs-identifier hs-var hs-var">utxosUtxoL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; UTxO era)
-&gt; (UTxOState era -&gt; UTxO era -&gt; UTxOState era)
-&gt; Lens (UTxOState era) (UTxOState era) (UTxO era) (UTxO era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; UTxO era
forall era. UTxOState era -&gt; UTxO era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxo"><span class="hs-identifier hs-var">utxosUtxo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605108"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605108"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605109"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679605109"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605108"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosUtxo"><span class="hs-identifier hs-var">utxosUtxo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605109"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>
</span><span id="line-688"></span><span id="local-6989586621679602865"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDepositedL"><span class="hs-identifier hs-type">utxosDepositedL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602865"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span></span><span>
</span><span id="line-689"></span><span id="utxosDepositedL"><span class="annot"><span class="annottext">utxosDepositedL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDepositedL"><span class="hs-identifier hs-var hs-var">utxosDepositedL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; Coin)
-&gt; (UTxOState era -&gt; Coin -&gt; UTxOState era)
-&gt; Lens (UTxOState era) (UTxOState era) Coin Coin
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; Coin
forall era. UTxOState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDeposited"><span class="hs-identifier hs-var">utxosDeposited</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605113"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605113"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605114"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605114"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605113"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDeposited"><span class="hs-identifier hs-var">utxosDeposited</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605114"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span id="local-6989586621679605115"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosFeesL"><span class="hs-identifier hs-type">utxosFeesL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605115"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span></span><span>
</span><span id="line-692"></span><span id="utxosFeesL"><span class="annot"><span class="annottext">utxosFeesL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosFeesL"><span class="hs-identifier hs-var hs-var">utxosFeesL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; Coin)
-&gt; (UTxOState era -&gt; Coin -&gt; UTxOState era)
-&gt; Lens (UTxOState era) (UTxOState era) Coin Coin
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; Coin
forall era. UTxOState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosFees"><span class="hs-identifier hs-var">utxosFees</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605119"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605119"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605120"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605120"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605119"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosFees"><span class="hs-identifier hs-var">utxosFees</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605120"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span id="local-6989586621679602853"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-type">utxosGovStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602853"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602853"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-695"></span><span id="utxosGovStateL"><span class="annot"><span class="annottext">utxosGovStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var hs-var">utxosGovStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; GovState era)
-&gt; (UTxOState era -&gt; GovState era -&gt; UTxOState era)
-&gt; Lens
     (UTxOState era) (UTxOState era) (GovState era) (GovState era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; GovState era
forall era. UTxOState era -&gt; GovState era
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovState"><span class="hs-identifier hs-var">utxosGovState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605123"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605123"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605124"><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679605124"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605123"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovState"><span class="hs-identifier hs-var">utxosGovState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605124"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span id="local-6989586621679602872"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosStakeDistrL"><span class="hs-identifier hs-type">utxosStakeDistrL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602872"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602872"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-698"></span><span id="utxosStakeDistrL"><span class="annot"><span class="annottext">utxosStakeDistrL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(IncrementalStake (EraCrypto era)
 -&gt; f (IncrementalStake (EraCrypto era)))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosStakeDistrL"><span class="hs-identifier hs-var hs-var">utxosStakeDistrL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; IncrementalStake (EraCrypto era))
-&gt; (UTxOState era
    -&gt; IncrementalStake (EraCrypto era) -&gt; UTxOState era)
-&gt; Lens
     (UTxOState era)
     (UTxOState era)
     (IncrementalStake (EraCrypto era))
     (IncrementalStake (EraCrypto era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; IncrementalStake (EraCrypto era)
forall era. UTxOState era -&gt; IncrementalStake (EraCrypto era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosStakeDistr"><span class="hs-identifier hs-var">utxosStakeDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605128"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605128"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605129"><span class="annot"><span class="annottext">IncrementalStake (EraCrypto era)
</span><a href="#local-6989586621679605129"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605128"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosStakeDistr"><span class="hs-identifier hs-var">utxosStakeDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605129"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>
</span><span id="line-700"></span><span id="local-6989586621679605130"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDonationL"><span class="hs-identifier hs-type">utxosDonationL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605130"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span></span><span>
</span><span id="line-701"></span><span id="utxosDonationL"><span class="annot"><span class="annottext">utxosDonationL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDonationL"><span class="hs-identifier hs-var hs-var">utxosDonationL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; Coin)
-&gt; (UTxOState era -&gt; Coin -&gt; UTxOState era)
-&gt; Lens (UTxOState era) (UTxOState era) Coin Coin
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; Coin
forall era. UTxOState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDonation"><span class="hs-identifier hs-var">utxosDonation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605134"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605134"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605135"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605135"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605134"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDonation"><span class="hs-identifier hs-var">utxosDonation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605135"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="hs-comment">-- ================ IncremetalStake ===========================</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span id="local-6989586621679602877"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMapL"><span class="hs-identifier hs-type">credMapL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602877"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="annot"><a href="#local-6989586621679602877"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompactForm</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-706"></span><span id="credMapL"><span class="annot"><span class="annottext">credMapL :: forall c (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'Staking c) (CompactForm Coin)
 -&gt; f (Map (Credential 'Staking c) (CompactForm Coin)))
-&gt; IncrementalStake c -&gt; f (IncrementalStake c)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMapL"><span class="hs-identifier hs-var hs-var">credMapL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IncrementalStake c
 -&gt; Map (Credential 'Staking c) (CompactForm Coin))
-&gt; (IncrementalStake c
    -&gt; Map (Credential 'Staking c) (CompactForm Coin)
    -&gt; IncrementalStake c)
-&gt; Lens
     (IncrementalStake c)
     (IncrementalStake c)
     (Map (Credential 'Staking c) (CompactForm Coin))
     (Map (Credential 'Staking c) (CompactForm Coin))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake c
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
forall c.
IncrementalStake c
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMap"><span class="hs-identifier hs-var">credMap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605139"><span class="annot"><span class="annottext">IncrementalStake c
</span><a href="#local-6989586621679605139"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605140"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679605140"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IncrementalStake c
</span><a href="#local-6989586621679605139"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMap"><span class="hs-identifier hs-var">credMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605140"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span id="local-6989586621679602880"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#ptrMapL"><span class="hs-identifier hs-type">ptrMapL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#IncrementalStake"><span class="hs-identifier hs-type">IncrementalStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602880"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompactForm</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-709"></span><span id="ptrMapL"><span class="annot"><span class="annottext">ptrMapL :: forall c (f :: * -&gt; *).
Functor f =&gt;
(Map Ptr (CompactForm Coin) -&gt; f (Map Ptr (CompactForm Coin)))
-&gt; IncrementalStake c -&gt; f (IncrementalStake c)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#ptrMapL"><span class="hs-identifier hs-var hs-var">ptrMapL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(IncrementalStake c -&gt; Map Ptr (CompactForm Coin))
-&gt; (IncrementalStake c
    -&gt; Map Ptr (CompactForm Coin) -&gt; IncrementalStake c)
-&gt; Lens
     (IncrementalStake c)
     (IncrementalStake c)
     (Map Ptr (CompactForm Coin))
     (Map Ptr (CompactForm Coin))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">IncrementalStake c -&gt; Map Ptr (CompactForm Coin)
forall c. IncrementalStake c -&gt; Map Ptr (CompactForm Coin)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#ptrMap"><span class="hs-identifier hs-var">ptrMap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679605144"><span class="annot"><span class="annottext">IncrementalStake c
</span><a href="#local-6989586621679605144"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679605145"><span class="annot"><span class="annottext">Map Ptr (CompactForm Coin)
</span><a href="#local-6989586621679605145"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IncrementalStake c
</span><a href="#local-6989586621679605144"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#ptrMap"><span class="hs-identifier hs-var">ptrMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679605145"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="hs-comment">-- ====================  Compound Lenses =======================</span><span>
</span><span id="line-712"></span><span>
</span><span id="line-713"></span><span id="local-6989586621679602883"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-type">newEpochStateGovStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#NewEpochState"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602883"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602883"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-714"></span><span id="newEpochStateGovStateL"><span class="annot"><span class="annottext">newEpochStateGovStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var hs-var">newEpochStateGovStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; f (EpochState era))
 -&gt; NewEpochState era -&gt; f (NewEpochState era))
-&gt; ((GovState era -&gt; f (GovState era))
    -&gt; EpochState era -&gt; f (EpochState era))
-&gt; (GovState era -&gt; f (GovState era))
-&gt; NewEpochState era
-&gt; f (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((GovState era -&gt; f (GovState era))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (GovState era -&gt; f (GovState era))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((UTxOState era -&gt; f (UTxOState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((GovState era -&gt; f (GovState era))
    -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; (GovState era -&gt; f (GovState era))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var">utxosGovStateL</span></a></span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span id="local-6989586621679602886"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-type">epochStateGovStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602886"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602886"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-717"></span><span id="epochStateGovStateL"><span class="annot"><span class="annottext">epochStateGovStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var hs-var">epochStateGovStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((GovState era -&gt; f (GovState era))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (GovState era -&gt; f (GovState era))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((UTxOState era -&gt; f (UTxOState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((GovState era -&gt; f (GovState era))
    -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; (GovState era -&gt; f (GovState era))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var">utxosGovStateL</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span id="local-6989586621679602889"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateDonationL"><span class="hs-identifier hs-type">epochStateDonationL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602889"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span></span><span>
</span><span id="line-720"></span><span id="epochStateDonationL"><span class="annot"><span class="annottext">epochStateDonationL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateDonationL"><span class="hs-identifier hs-var hs-var">epochStateDonationL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((Coin -&gt; f Coin) -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (Coin -&gt; f Coin)
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((UTxOState era -&gt; f (UTxOState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; (Coin -&gt; f Coin)
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDonationL"><span class="hs-identifier hs-var">utxosDonationL</span></a></span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span id="local-6989586621679605162"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateTreasuryL"><span class="hs-identifier hs-type">epochStateTreasuryL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679605162"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span></span><span>
</span><span id="line-723"></span><span id="epochStateTreasuryL"><span class="annot"><span class="annottext">epochStateTreasuryL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateTreasuryL"><span class="hs-identifier hs-var hs-var">epochStateTreasuryL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AccountState -&gt; f AccountState)
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(AccountState -&gt; f AccountState)
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esAccountStateL"><span class="hs-identifier hs-var">esAccountStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((AccountState -&gt; f AccountState)
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((Coin -&gt; f Coin) -&gt; AccountState -&gt; f AccountState)
-&gt; (Coin -&gt; f Coin)
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; f Coin) -&gt; AccountState -&gt; f AccountState
Lens' AccountState Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#asTreasuryL"><span class="hs-identifier hs-var">asTreasuryL</span></a></span><span>
</span><span id="line-724"></span><span>
</span><span id="line-725"></span><span id="local-6989586621679602894"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateIncrStakeDistrL"><span class="hs-identifier hs-type">epochStateIncrStakeDistrL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-726"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span>
</span><span id="line-727"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602894"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602894"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompactForm</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-729"></span><span id="epochStateIncrStakeDistrL"><span class="annot"><span class="annottext">epochStateIncrStakeDistrL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
 -&gt; f (Map
         (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateIncrStakeDistrL"><span class="hs-identifier hs-var hs-var">epochStateIncrStakeDistrL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
     -&gt; f (Map
             (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
    -&gt; f (Map
            (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((UTxOState era -&gt; f (UTxOState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
     -&gt; f (Map
             (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
    -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; (Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
    -&gt; f (Map
            (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(IncrementalStake (EraCrypto era)
 -&gt; f (IncrementalStake (EraCrypto era)))
-&gt; UTxOState era -&gt; f (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(IncrementalStake (EraCrypto era)
 -&gt; f (IncrementalStake (EraCrypto era)))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosStakeDistrL"><span class="hs-identifier hs-var">utxosStakeDistrL</span></a></span><span> </span><span class="annot"><span class="annottext">((IncrementalStake (EraCrypto era)
  -&gt; f (IncrementalStake (EraCrypto era)))
 -&gt; UTxOState era -&gt; f (UTxOState era))
-&gt; ((Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
     -&gt; f (Map
             (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
    -&gt; IncrementalStake (EraCrypto era)
    -&gt; f (IncrementalStake (EraCrypto era)))
-&gt; (Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
    -&gt; f (Map
            (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; UTxOState era
-&gt; f (UTxOState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
 -&gt; f (Map
         (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; IncrementalStake (EraCrypto era)
-&gt; f (IncrementalStake (EraCrypto era))
forall c (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'Staking c) (CompactForm Coin)
 -&gt; f (Map (Credential 'Staking c) (CompactForm Coin)))
-&gt; IncrementalStake c -&gt; f (IncrementalStake c)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#credMapL"><span class="hs-identifier hs-var">credMapL</span></a></span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span id="local-6989586621679602898"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateRegDrepL"><span class="hs-identifier hs-type">epochStateRegDrepL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span>
</span><span id="line-733"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-734"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DRepRole</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DRepState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-735"></span><span id="epochStateRegDrepL"><span class="annot"><span class="annottext">epochStateRegDrepL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; f (Map
         (Credential 'DRepRole (EraCrypto era))
         (DRepState (EraCrypto era))))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateRegDrepL"><span class="hs-identifier hs-var hs-var">epochStateRegDrepL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((Map
       (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
     -&gt; f (Map
             (Credential 'DRepRole (EraCrypto era))
             (DRepState (EraCrypto era))))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (Map
      (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
    -&gt; f (Map
            (Credential 'DRepRole (EraCrypto era))
            (DRepState (EraCrypto era))))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; f (CertState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((Map
       (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
     -&gt; f (Map
             (Credential 'DRepRole (EraCrypto era))
             (DRepState (EraCrypto era))))
    -&gt; CertState era -&gt; f (CertState era))
-&gt; (Map
      (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
    -&gt; f (Map
            (Credential 'DRepRole (EraCrypto era))
            (DRepState (EraCrypto era))))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; f (VState era))
-&gt; CertState era -&gt; f (CertState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(VState era -&gt; f (VState era))
-&gt; CertState era -&gt; f (CertState era)
</span><span class="hs-identifier hs-var">certVStateL</span></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; f (VState era))
 -&gt; CertState era -&gt; f (CertState era))
-&gt; ((Map
       (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
     -&gt; f (Map
             (Credential 'DRepRole (EraCrypto era))
             (DRepState (EraCrypto era))))
    -&gt; VState era -&gt; f (VState era))
-&gt; (Map
      (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
    -&gt; f (Map
            (Credential 'DRepRole (EraCrypto era))
            (DRepState (EraCrypto era))))
-&gt; CertState era
-&gt; f (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; f (Map
         (Credential 'DRepRole (EraCrypto era))
         (DRepState (EraCrypto era))))
-&gt; VState era -&gt; f (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map
   (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
 -&gt; f (Map
         (Credential 'DRepRole (EraCrypto era))
         (DRepState (EraCrypto era))))
-&gt; VState era -&gt; f (VState era)
</span><span class="hs-identifier hs-var">vsDRepsL</span></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span id="local-6989586621679602907"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateUMapL"><span class="hs-identifier hs-type">epochStateUMapL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-738"></span><span id="epochStateUMapL"><span class="annot"><span class="annottext">epochStateUMapL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateUMapL"><span class="hs-identifier hs-var hs-var">epochStateUMapL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; f (LedgerState era))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; f (CertState era))
 -&gt; LedgerState era -&gt; f (LedgerState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; CertState era -&gt; f (CertState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; LedgerState era
-&gt; f (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; f (DState era))
-&gt; CertState era -&gt; f (CertState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(DState era -&gt; f (DState era))
-&gt; CertState era -&gt; f (CertState era)
</span><span class="hs-identifier hs-var">certDStateL</span></span><span> </span><span class="annot"><span class="annottext">((DState era -&gt; f (DState era))
 -&gt; CertState era -&gt; f (CertState era))
-&gt; ((UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
    -&gt; DState era -&gt; f (DState era))
-&gt; (UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; CertState era
-&gt; f (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UMap (EraCrypto era) -&gt; f (UMap (EraCrypto era)))
-&gt; DState era -&gt; f (DState era)
</span><span class="hs-identifier hs-var">dsUnifiedL</span></span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span id="local-6989586621679602912"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateStakeDistrL"><span class="hs-identifier hs-type">epochStateStakeDistrL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-741"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span>
</span><span id="line-742"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#EpochState"><span class="hs-identifier hs-type">EpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602912"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">VB</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">VP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Credential</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Staking</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EraCrypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679602912"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CompactForm</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-744"></span><span id="epochStateStakeDistrL"><span class="annot"><span class="annottext">epochStateStakeDistrL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(VMap
   VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
 -&gt; f (VMap
         VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateStakeDistrL"><span class="hs-identifier hs-var hs-var">epochStateStakeDistrL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era)))
-&gt; EpochState era -&gt; f (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era)))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#esSnapshotsL"><span class="hs-identifier hs-var">esSnapshotsL</span></a></span><span> </span><span class="annot"><span class="annottext">((SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era)))
 -&gt; EpochState era -&gt; f (EpochState era))
-&gt; ((VMap
       VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
     -&gt; f (VMap
             VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
    -&gt; SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era)))
-&gt; (VMap
      VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
    -&gt; f (VMap
            VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; EpochState era
-&gt; f (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(SnapShot (EraCrypto era) -&gt; f (SnapShot (EraCrypto era)))
-&gt; SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era))
forall c (f :: * -&gt; *).
Functor f =&gt;
(SnapShot c -&gt; f (SnapShot c)) -&gt; SnapShots c -&gt; f (SnapShots c)
</span><span class="hs-identifier hs-var">ssStakeMarkL</span></span><span> </span><span class="annot"><span class="annottext">((SnapShot (EraCrypto era) -&gt; f (SnapShot (EraCrypto era)))
 -&gt; SnapShots (EraCrypto era) -&gt; f (SnapShots (EraCrypto era)))
-&gt; ((VMap
       VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
     -&gt; f (VMap
             VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
    -&gt; SnapShot (EraCrypto era) -&gt; f (SnapShot (EraCrypto era)))
-&gt; (VMap
      VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
    -&gt; f (VMap
            VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; SnapShots (EraCrypto era)
-&gt; f (SnapShots (EraCrypto era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(VMap
   VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
 -&gt; f (VMap
         VB VP (Credential 'Staking (EraCrypto era)) (CompactForm Coin)))
-&gt; SnapShot (EraCrypto era) -&gt; f (SnapShot (EraCrypto era))
forall c (f :: * -&gt; *).
Functor f =&gt;
(VMap VB VP (Credential 'Staking c) (CompactForm Coin)
 -&gt; f (VMap VB VP (Credential 'Staking c) (CompactForm Coin)))
-&gt; SnapShot c -&gt; f (SnapShot c)
</span><span class="hs-identifier hs-var">ssStakeDistrL</span></span><span>
</span><span id="line-745"></span><span>
</span><span id="line-746"></span><span id="local-6989586621679602921"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#potEqualsObligation"><span class="hs-identifier hs-type">potEqualsObligation</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-747"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602921"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-748"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">CertState</span></span><span> </span><span class="annot"><a href="#local-6989586621679602921"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-749"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602921"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-750"></span><span>  </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-751"></span><span id="potEqualsObligation"><span class="annot"><span class="annottext">potEqualsObligation :: forall era. EraGov era =&gt; CertState era -&gt; UTxOState era -&gt; Bool
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#potEqualsObligation"><span class="hs-identifier hs-var hs-var">potEqualsObligation</span></a></span></span><span> </span><span id="local-6989586621679605196"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679605196"><span class="hs-identifier hs-var">certState</span></a></span></span><span> </span><span id="local-6989586621679605197"><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605197"><span class="hs-identifier hs-var">utxoSt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605198"><span class="hs-identifier hs-var">obligation</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679605199"><span class="hs-identifier hs-var">pot</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-753"></span><span>    </span><span id="local-6989586621679605198"><span class="annot"><span class="annottext">obligation :: Coin
</span><a href="#local-6989586621679605198"><span class="hs-identifier hs-var hs-var">obligation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CertState era -&gt; GovState era -&gt; Coin
forall era. EraGov era =&gt; CertState era -&gt; GovState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#totalObligation"><span class="hs-identifier hs-var">totalObligation</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679605196"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605197"><span class="hs-identifier hs-var">utxoSt</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era
-&gt; Getting (GovState era) (UTxOState era) (GovState era)
-&gt; GovState era
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting (GovState era) (UTxOState era) (GovState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var">utxosGovStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>    </span><span id="local-6989586621679605199"><span class="annot"><span class="annottext">pot :: Coin
</span><a href="#local-6989586621679605199"><span class="hs-identifier hs-var hs-var">pot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState era
</span><a href="#local-6989586621679605197"><span class="hs-identifier hs-var">utxoSt</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState era -&gt; Getting Coin (UTxOState era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Coin (UTxOState era) Coin
forall era (f :: * -&gt; *).
Functor f =&gt;
(Coin -&gt; f Coin) -&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#utxosDepositedL"><span class="hs-identifier hs-var">utxosDepositedL</span></a></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span id="local-6989586621679602923"><span class="annot"><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#totalObligation"><span class="hs-identifier hs-type">totalObligation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602923"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CertState</span></span><span> </span><span class="annot"><a href="#local-6989586621679602923"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Shelley.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679602923"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Coin</span></span></span><span>
</span><span id="line-757"></span><span id="totalObligation"><span class="annot"><span class="annottext">totalObligation :: forall era. EraGov era =&gt; CertState era -&gt; GovState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.LedgerState.Types.html#totalObligation"><span class="hs-identifier hs-var hs-var">totalObligation</span></a></span></span><span> </span><span id="local-6989586621679605206"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679605206"><span class="hs-identifier hs-var">certState</span></a></span></span><span> </span><span id="local-6989586621679605207"><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679605207"><span class="hs-identifier hs-var">govState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-758"></span><span>  </span><span class="annot"><span class="annottext">CertState era -&gt; Coin
forall era. CertState era -&gt; Coin
</span><span class="hs-identifier hs-var">obligationCertState</span></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679605206"><span class="hs-identifier hs-var">certState</span></a></span><span>
</span><span id="line-759"></span><span>    </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GovState era -&gt; Coin
forall era. EraGov era =&gt; GovState era -&gt; Coin
</span><a href="Cardano.Ledger.Shelley.Governance.html#obligationGovState"><span class="hs-identifier hs-var">obligationGovState</span></a></span><span> </span><span class="annot"><span class="annottext">GovState era
</span><a href="#local-6989586621679605207"><span class="hs-identifier hs-var">govState</span></a></span><span>
</span><span id="line-760"></span></pre></body></html>