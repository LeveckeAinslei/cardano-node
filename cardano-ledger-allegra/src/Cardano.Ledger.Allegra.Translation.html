<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.Allegra.Translation</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Translation.html#shelleyToAllegraAVVMsToDelete"><span class="hs-identifier">shelleyToAllegraAVVMsToDelete</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html"><span class="hs-identifier">Cardano.Ledger.Allegra.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier">AllegraEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Allegra.Tx.html"><span class="hs-identifier">Cardano.Ledger.Allegra.Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Binary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DecoderError</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.CertState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">CommitteeState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Core</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Crypto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Crypto</span></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ShelleyEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.API</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><span class="hs-identifier">CertState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-identifier">DState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><span class="hs-identifier">EpochState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><span class="hs-identifier">LedgerState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><span class="hs-identifier">NewEpochState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><span class="hs-identifier">PState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><span class="hs-identifier">ProposedPPUpdates</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><span class="hs-identifier">ShelleyGovState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><span class="hs-identifier">ShelleyTx</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><span class="hs-identifier">ShelleyTxOut</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><span class="hs-identifier">UTxO</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-identifier">UTxOState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="hs-identifier">Update</span></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-identifier">VState</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LS</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><span class="hs-identifier">returnRedeemAddrsToReserves</span></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.PParams</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Update</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.TxWits</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ShelleyTxWits</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Coerce.html"><span class="hs-identifier">Data.Coerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier">coerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- Translation from Shelley to Allegra</span><span>
</span><span id="line-47"></span><span class="hs-comment">--</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- The instances below are needed by the consensus layer. Do not remove any of</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- them without coordinating with consensus.</span><span>
</span><span id="line-50"></span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- Please add auxiliary instances and other declarations at the bottom of this</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- module, not in the list below so that it remains clear which instances the</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- consensus layer needs.</span><span>
</span><span id="line-54"></span><span class="hs-comment">--</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- WARNING: when a translation instance currently uses the default</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- 'TranslationError', i.e., 'Void', it means the consensus layer relies on it</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- being total. Do not change it!</span><span>
</span><span id="line-58"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- | Return the subset of UTxO corresponding to Byron-era AVVM addresses, which</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- are to be removed on the Shelley/Allegra boundary. This set will be passed</span><span>
</span><span id="line-62"></span><span class="hs-comment">-- _back_ to the translation functions as the UTxO, allowing these addresses to</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- be removed. This is needed because we cannot do a full scan on the UTxO at</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- this point, since it has been persisted to disk.</span><span>
</span><span id="line-65"></span><span id="local-6989586621679287502"><span class="annot"><a href="Cardano.Ledger.Allegra.Translation.html#shelleyToAllegraAVVMsToDelete"><span class="hs-identifier hs-type">shelleyToAllegraAVVMsToDelete</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NewEpochState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679287502"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679287502"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-66"></span><span id="shelleyToAllegraAVVMsToDelete"><span class="annot"><span class="annottext">shelleyToAllegraAVVMsToDelete :: forall c. NewEpochState (ShelleyEra c) -&gt; UTxO (ShelleyEra c)
</span><a href="Cardano.Ledger.Allegra.Translation.html#shelleyToAllegraAVVMsToDelete"><span class="hs-identifier hs-var hs-var">shelleyToAllegraAVVMsToDelete</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c) -&gt; StashedAVVMAddresses (ShelleyEra c)
NewEpochState (ShelleyEra c) -&gt; UTxO (ShelleyEra c)
forall era. NewEpochState era -&gt; StashedAVVMAddresses era
</span><span class="hs-identifier hs-var">stashedAVVMAddresses</span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287521"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287521"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287521"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NewEpochState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621679287709"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; NewEpochState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) NewEpochState)
     (NewEpochState (AllegraEra c))
</span><a href="#local-6989586621679287709"><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></a></span></span><span> </span><span id="local-6989586621679287711"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287711"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679287712"><span class="annot"><span class="annottext">NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><span class="annottext">NewEpochState (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) NewEpochState)
     (NewEpochState (AllegraEra c))
forall a.
a
-&gt; ExceptT
     (TranslationError (AllegraEra c) NewEpochState) Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(NewEpochState (AllegraEra c)
 -&gt; Except
      (TranslationError (AllegraEra c) NewEpochState)
      (NewEpochState (AllegraEra c)))
-&gt; NewEpochState (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) NewEpochState)
     (NewEpochState (AllegraEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-71"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">NewEpochState</span></span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">nesEL :: EpochNo
</span><span class="hs-identifier hs-var">nesEL</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c) -&gt; EpochNo
forall era. NewEpochState era -&gt; EpochNo
</span><span class="hs-identifier hs-var">nesEL</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesBprev :: BlocksMade (EraCrypto (AllegraEra c))
</span><span class="hs-identifier hs-var">nesBprev</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
-&gt; BlocksMade (EraCrypto (ShelleyEra c))
forall era. NewEpochState era -&gt; BlocksMade (EraCrypto era)
</span><span class="hs-identifier hs-var">nesBprev</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-74"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesBcur :: BlocksMade (EraCrypto (AllegraEra c))
</span><span class="hs-identifier hs-var">nesBcur</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
-&gt; BlocksMade (EraCrypto (ShelleyEra c))
forall era. NewEpochState era -&gt; BlocksMade (EraCrypto era)
</span><span class="hs-identifier hs-var">nesBcur</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-75"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesEs :: EpochState (AllegraEra c)
</span><span class="hs-identifier hs-var">nesEs</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; EpochState (PreviousEra (AllegraEra c))
-&gt; EpochState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287711"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochState (PreviousEra (AllegraEra c))
 -&gt; EpochState (AllegraEra c))
-&gt; EpochState (PreviousEra (AllegraEra c))
-&gt; EpochState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c) -&gt; EpochState (ShelleyEra c)
EpochState (ShelleyEra c)
-&gt; EpochState (PreviousEra (AllegraEra c))
forall era. EraTxOut era =&gt; EpochState era -&gt; EpochState era
</span><span class="hs-identifier hs-var">LS.returnRedeemAddrsToReserves</span></span><span> </span><span class="annot"><span class="annottext">(EpochState (ShelleyEra c)
 -&gt; EpochState (PreviousEra (AllegraEra c)))
-&gt; (NewEpochState (PreviousEra (AllegraEra c))
    -&gt; EpochState (ShelleyEra c))
-&gt; NewEpochState (PreviousEra (AllegraEra c))
-&gt; EpochState (PreviousEra (AllegraEra c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c) -&gt; EpochState (ShelleyEra c)
NewEpochState (PreviousEra (AllegraEra c))
-&gt; EpochState (ShelleyEra c)
forall era. NewEpochState era -&gt; EpochState era
</span><span class="hs-identifier hs-var">nesEs</span></span><span> </span><span class="annot"><span class="annottext">(NewEpochState (PreviousEra (AllegraEra c))
 -&gt; EpochState (PreviousEra (AllegraEra c)))
-&gt; NewEpochState (PreviousEra (AllegraEra c))
-&gt; EpochState (PreviousEra (AllegraEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-76"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesRu :: StrictMaybe (PulsingRewUpdate (EraCrypto (AllegraEra c)))
</span><span class="hs-identifier hs-var">nesRu</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
-&gt; StrictMaybe (PulsingRewUpdate (EraCrypto (ShelleyEra c)))
forall era.
NewEpochState era -&gt; StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><span class="hs-identifier hs-var">nesRu</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-77"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesPd :: PoolDistr (EraCrypto (AllegraEra c))
</span><span class="hs-identifier hs-var">nesPd</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
-&gt; PoolDistr (EraCrypto (ShelleyEra c))
forall era. NewEpochState era -&gt; PoolDistr (EraCrypto era)
</span><span class="hs-identifier hs-var">nesPd</span></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ShelleyEra c)
NewEpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287712"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-78"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- At this point, the consensus layer has passed in our stashed AVVM</span><span>
</span><span id="line-79"></span><span>          </span><span class="hs-comment">-- addresses as our UTxO, and we have deleted them above (with</span><span>
</span><span id="line-80"></span><span>          </span><span class="hs-comment">-- 'returnRedeemAddrsToReserves'), so we may safely discard this map.</span><span>
</span><span id="line-81"></span><span>          </span><span class="annot"><span class="annottext">stashedAVVMAddresses :: StashedAVVMAddresses (AllegraEra c)
</span><span class="hs-identifier hs-var">stashedAVVMAddresses</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679287558"><span class="annot"><a href="#local-6989586621679287558"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287558"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287558"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyTx</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="TranslationError"><span class="annot"><span class="hs-identifier hs-var">TranslationError</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287558"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyTx</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecoderError</span></span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621679287744"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; ShelleyTx (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) ShelleyTx)
     (ShelleyTx (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287745"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287745"><span class="hs-identifier hs-var">_ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyTx (PreviousEra (AllegraEra c))
-&gt; Except DecoderError (ShelleyTx (AllegraEra c))
forall era (ti :: * -&gt; *) (to :: * -&gt; *).
(Era era, ToCBOR (ti (PreviousEra era)),
 DecCBOR (Annotator (to era))) =&gt;
Text -&gt; ti (PreviousEra era) -&gt; Except DecoderError (to era)
</span><span class="hs-identifier hs-var">translateEraThroughCBOR</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ShelleyTx&quot;</span></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- Auxiliary instances and functions</span><span>
</span><span id="line-90"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287575"><span id="local-6989586621679287754"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287575"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287575"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PParams</span></span></span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287578"><span id="local-6989586621679287771"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287578"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287578"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PParamsUpdate</span></span></span></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287581"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287581"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287581"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProposedPPUpdates</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621679287794"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; ProposedPPUpdates (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) ProposedPPUpdates)
     (ProposedPPUpdates (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287795"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287795"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ProposedPPUpdates</span></span><span> </span><span id="local-6989586621679287797"><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto (PreviousEra (AllegraEra c))))
  (PParamsUpdate (PreviousEra (AllegraEra c)))
</span><a href="#local-6989586621679287797"><span class="hs-identifier hs-var">ppup</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="annottext">ProposedPPUpdates (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) ProposedPPUpdates)
     (ProposedPPUpdates (AllegraEra c))
forall a.
a
-&gt; ExceptT
     (TranslationError (AllegraEra c) ProposedPPUpdates) Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposedPPUpdates (AllegraEra c)
 -&gt; Except
      (TranslationError (AllegraEra c) ProposedPPUpdates)
      (ProposedPPUpdates (AllegraEra c)))
-&gt; ProposedPPUpdates (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) ProposedPPUpdates)
     (ProposedPPUpdates (AllegraEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto (AllegraEra c)))
  (PParamsUpdate (AllegraEra c))
-&gt; ProposedPPUpdates (AllegraEra c)
forall era.
Map (KeyHash 'Genesis (EraCrypto era)) (PParamsUpdate era)
-&gt; ProposedPPUpdates era
</span><span class="hs-identifier hs-var">ProposedPPUpdates</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (KeyHash 'Genesis (EraCrypto (AllegraEra c)))
   (PParamsUpdate (AllegraEra c))
 -&gt; ProposedPPUpdates (AllegraEra c))
-&gt; Map
     (KeyHash 'Genesis (EraCrypto (AllegraEra c)))
     (PParamsUpdate (AllegraEra c))
-&gt; ProposedPPUpdates (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(PParamsUpdate (ShelleyEra c) -&gt; PParamsUpdate (AllegraEra c))
-&gt; Map (KeyHash 'Genesis c) (PParamsUpdate (ShelleyEra c))
-&gt; Map (KeyHash 'Genesis c) (PParamsUpdate (AllegraEra c))
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#map"><span class="hs-identifier hs-var">Map.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; PParamsUpdate (PreviousEra (AllegraEra c))
-&gt; PParamsUpdate (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287795"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'Genesis c) (PParamsUpdate (ShelleyEra c))
Map
  (KeyHash 'Genesis (EraCrypto (PreviousEra (AllegraEra c))))
  (PParamsUpdate (PreviousEra (AllegraEra c)))
</span><a href="#local-6989586621679287797"><span class="hs-identifier hs-var">ppup</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287591"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287591"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287591"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyGovState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span id="local-6989586621679287821"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; ShelleyGovState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) ShelleyGovState)
     (ShelleyGovState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287822"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287822"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679287823"><span class="annot"><span class="annottext">ShelleyGovState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287823"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="annottext">ShelleyGovState (AllegraEra c)
-&gt; ExceptT Void Identity (ShelleyGovState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-103"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">ShelleyGovState</span></span><span>
</span><span id="line-104"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">proposals :: ProposedPPUpdates (AllegraEra c)
</span><span class="hs-identifier hs-var">proposals</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; ProposedPPUpdates (PreviousEra (AllegraEra c))
-&gt; ProposedPPUpdates (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287822"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposedPPUpdates (PreviousEra (AllegraEra c))
 -&gt; ProposedPPUpdates (AllegraEra c))
-&gt; ProposedPPUpdates (PreviousEra (AllegraEra c))
-&gt; ProposedPPUpdates (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c) -&gt; ProposedPPUpdates (ShelleyEra c)
forall era. ShelleyGovState era -&gt; ProposedPPUpdates era
</span><span class="hs-identifier hs-var">proposals</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c)
ShelleyGovState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287823"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">futureProposals :: ProposedPPUpdates (AllegraEra c)
</span><span class="hs-identifier hs-var">futureProposals</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; ProposedPPUpdates (PreviousEra (AllegraEra c))
-&gt; ProposedPPUpdates (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287822"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposedPPUpdates (PreviousEra (AllegraEra c))
 -&gt; ProposedPPUpdates (AllegraEra c))
-&gt; ProposedPPUpdates (PreviousEra (AllegraEra c))
-&gt; ProposedPPUpdates (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c) -&gt; ProposedPPUpdates (ShelleyEra c)
forall era. ShelleyGovState era -&gt; ProposedPPUpdates era
</span><span class="hs-identifier hs-var">futureProposals</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c)
ShelleyGovState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287823"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sgovPp :: PParams (AllegraEra c)
</span><span class="hs-identifier hs-var">sgovPp</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; PParams (PreviousEra (AllegraEra c)) -&gt; PParams (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287822"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(PParams (PreviousEra (AllegraEra c)) -&gt; PParams (AllegraEra c))
-&gt; PParams (PreviousEra (AllegraEra c)) -&gt; PParams (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c) -&gt; PParams (ShelleyEra c)
forall era. ShelleyGovState era -&gt; PParams era
</span><span class="hs-identifier hs-var">sgovPp</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c)
ShelleyGovState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287823"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sgovPrevPp :: PParams (AllegraEra c)
</span><span class="hs-identifier hs-var">sgovPrevPp</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; PParams (PreviousEra (AllegraEra c)) -&gt; PParams (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287822"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(PParams (PreviousEra (AllegraEra c)) -&gt; PParams (AllegraEra c))
-&gt; PParams (PreviousEra (AllegraEra c)) -&gt; PParams (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c) -&gt; PParams (ShelleyEra c)
forall era. ShelleyGovState era -&gt; PParams era
</span><span class="hs-identifier hs-var">sgovPrevPp</span></span><span> </span><span class="annot"><span class="annottext">ShelleyGovState (ShelleyEra c)
ShelleyGovState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287823"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287596"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287596"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287596"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyTxOut</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621679287846"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; ShelleyTxOut (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) ShelleyTxOut)
     (ShelleyTxOut (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyTxOut (AllegraEra c)
-&gt; ExceptT Void Identity (ShelleyTxOut (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ShelleyTxOut (AllegraEra c)
 -&gt; ExceptT Void Identity (ShelleyTxOut (AllegraEra c)))
-&gt; (ShelleyTxOut (ShelleyEra c) -&gt; ShelleyTxOut (AllegraEra c))
-&gt; ShelleyTxOut (ShelleyEra c)
-&gt; ExceptT Void Identity (ShelleyTxOut (AllegraEra c))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyTxOut (ShelleyEra c) -&gt; ShelleyTxOut (AllegraEra c)
TxOut (PreviousEra (AllegraEra c)) -&gt; TxOut (AllegraEra c)
forall era.
(EraTxOut era, EraTxOut (PreviousEra era)) =&gt;
TxOut (PreviousEra era) -&gt; TxOut era
</span><span class="hs-identifier hs-var">upgradeTxOut</span></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287605"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287605"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287605"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTxO</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621679287862"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; UTxO (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) UTxO) (UTxO (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287863"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287863"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679287864"><span class="annot"><span class="annottext">UTxO (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287864"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><span class="annottext">UTxO (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) UTxO) (UTxO (AllegraEra c))
forall a.
a -&gt; ExceptT (TranslationError (AllegraEra c) UTxO) Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO (AllegraEra c)
 -&gt; Except
      (TranslationError (AllegraEra c) UTxO) (UTxO (AllegraEra c)))
-&gt; UTxO (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) UTxO) (UTxO (AllegraEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto (AllegraEra c))) (TxOut (AllegraEra c))
-&gt; UTxO (AllegraEra c)
forall era. Map (TxIn (EraCrypto era)) (TxOut era) -&gt; UTxO era
</span><span class="hs-identifier hs-var">UTxO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; ShelleyTxOut (PreviousEra (AllegraEra c))
-&gt; ShelleyTxOut (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287863"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ShelleyTxOut (ShelleyEra c) -&gt; ShelleyTxOut (AllegraEra c))
-&gt; Map (TxIn c) (ShelleyTxOut (ShelleyEra c))
-&gt; Map (TxIn c) (ShelleyTxOut (AllegraEra c))
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#map"><span class="hs-operator hs-var">`Map.map`</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO (ShelleyEra c)
-&gt; Map (TxIn (EraCrypto (ShelleyEra c))) (TxOut (ShelleyEra c))
forall era. UTxO era -&gt; Map (TxIn (EraCrypto era)) (TxOut era)
</span><span class="hs-identifier hs-var">unUTxO</span></span><span> </span><span class="annot"><span class="annottext">UTxO (ShelleyEra c)
UTxO (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287864"><span class="hs-identifier hs-var">utxo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287611"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287611"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287611"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTxOState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-118"></span><span>  </span><span id="local-6989586621679287882"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; UTxOState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) UTxOState)
     (UTxOState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287883"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287883"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679287884"><span class="annot"><span class="annottext">UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">UTxOState (AllegraEra c)
-&gt; ExceptT Void Identity (UTxOState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">UTxOState</span></span><span>
</span><span id="line-121"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">utxosUtxo :: UTxO (AllegraEra c)
</span><span class="hs-identifier hs-var">utxosUtxo</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; UTxO (PreviousEra (AllegraEra c)) -&gt; UTxO (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287883"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO (PreviousEra (AllegraEra c)) -&gt; UTxO (AllegraEra c))
-&gt; UTxO (PreviousEra (AllegraEra c)) -&gt; UTxO (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c) -&gt; UTxO (ShelleyEra c)
forall era. UTxOState era -&gt; UTxO era
</span><span class="hs-identifier hs-var">utxosUtxo</span></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-122"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">utxosDeposited :: Coin
</span><span class="hs-identifier hs-var">utxosDeposited</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c) -&gt; Coin
forall era. UTxOState era -&gt; Coin
</span><span class="hs-identifier hs-var">utxosDeposited</span></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-123"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">utxosFees :: Coin
</span><span class="hs-identifier hs-var">utxosFees</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c) -&gt; Coin
forall era. UTxOState era -&gt; Coin
</span><span class="hs-identifier hs-var">utxosFees</span></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">utxosGovState :: GovState (AllegraEra c)
</span><span class="hs-identifier hs-var">utxosGovState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; ShelleyGovState (PreviousEra (AllegraEra c))
-&gt; ShelleyGovState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287883"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ShelleyGovState (PreviousEra (AllegraEra c))
 -&gt; ShelleyGovState (AllegraEra c))
-&gt; ShelleyGovState (PreviousEra (AllegraEra c))
-&gt; ShelleyGovState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c) -&gt; GovState (ShelleyEra c)
forall era. UTxOState era -&gt; GovState era
</span><span class="hs-identifier hs-var">utxosGovState</span></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-125"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">utxosStakeDistr :: IncrementalStake (EraCrypto (AllegraEra c))
</span><span class="hs-identifier hs-var">utxosStakeDistr</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
-&gt; IncrementalStake (EraCrypto (ShelleyEra c))
forall era. UTxOState era -&gt; IncrementalStake (EraCrypto era)
</span><span class="hs-identifier hs-var">utxosStakeDistr</span></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-126"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">utxosDonation :: Coin
</span><span class="hs-identifier hs-var">utxosDonation</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c) -&gt; Coin
forall era. UTxOState era -&gt; Coin
</span><span class="hs-identifier hs-var">utxosDonation</span></span><span> </span><span class="annot"><span class="annottext">UTxOState (ShelleyEra c)
UTxOState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287884"><span class="hs-identifier hs-var">us</span></a></span><span>
</span><span id="line-127"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287621"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287621"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287621"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621679287903"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; DState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) DState) (DState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DState</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679287905"><span id="local-6989586621679287906"><span id="local-6989586621679287907"><span id="local-6989586621679287908"><span class="annot"><span class="annottext">Map
  (FutureGenDeleg (EraCrypto (PreviousEra (AllegraEra c))))
  (GenDelegPair (EraCrypto (PreviousEra (AllegraEra c))))
GenDelegs (EraCrypto (PreviousEra (AllegraEra c)))
InstantaneousRewards (EraCrypto (PreviousEra (AllegraEra c)))
UMap (EraCrypto (PreviousEra (AllegraEra c)))
dsUnified :: UMap (EraCrypto (PreviousEra (AllegraEra c)))
dsFutureGenDelegs :: Map
  (FutureGenDeleg (EraCrypto (PreviousEra (AllegraEra c))))
  (GenDelegPair (EraCrypto (PreviousEra (AllegraEra c))))
dsGenDelegs :: GenDelegs (EraCrypto (PreviousEra (AllegraEra c)))
dsIRewards :: InstantaneousRewards (EraCrypto (PreviousEra (AllegraEra c)))
dsFutureGenDelegs :: forall era.
DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
dsGenDelegs :: forall era. DState era -&gt; GenDelegs (EraCrypto era)
dsIRewards :: forall era. DState era -&gt; InstantaneousRewards (EraCrypto era)
dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="#local-6989586621679287905"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState (AllegraEra c)
-&gt; ExceptT Void Identity (DState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DState</span></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Map
  (FutureGenDeleg (EraCrypto (PreviousEra (AllegraEra c))))
  (GenDelegPair (EraCrypto (PreviousEra (AllegraEra c))))
Map
  (FutureGenDeleg (EraCrypto (AllegraEra c)))
  (GenDelegPair (EraCrypto (AllegraEra c)))
GenDelegs (EraCrypto (PreviousEra (AllegraEra c)))
GenDelegs (EraCrypto (AllegraEra c))
InstantaneousRewards (EraCrypto (PreviousEra (AllegraEra c)))
InstantaneousRewards (EraCrypto (AllegraEra c))
UMap (EraCrypto (PreviousEra (AllegraEra c)))
UMap (EraCrypto (AllegraEra c))
dsUnified :: UMap (EraCrypto (PreviousEra (AllegraEra c)))
dsFutureGenDelegs :: Map
  (FutureGenDeleg (EraCrypto (PreviousEra (AllegraEra c))))
  (GenDelegPair (EraCrypto (PreviousEra (AllegraEra c))))
dsGenDelegs :: GenDelegs (EraCrypto (PreviousEra (AllegraEra c)))
dsIRewards :: InstantaneousRewards (EraCrypto (PreviousEra (AllegraEra c)))
dsFutureGenDelegs :: Map
  (FutureGenDeleg (EraCrypto (AllegraEra c)))
  (GenDelegPair (EraCrypto (AllegraEra c)))
dsGenDelegs :: GenDelegs (EraCrypto (AllegraEra c))
dsIRewards :: InstantaneousRewards (EraCrypto (AllegraEra c))
dsUnified :: UMap (EraCrypto (AllegraEra c))
</span><a href="#local-6989586621679287905"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287633"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287633"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287633"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CommitteeState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621679287924"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; CommitteeState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) CommitteeState)
     (CommitteeState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CommitteeState</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679287926"><span class="annot"><span class="annottext">Map
  (Credential
     'ColdCommitteeRole (EraCrypto (PreviousEra (AllegraEra c))))
  (Maybe
     (Credential
        'HotCommitteeRole (EraCrypto (PreviousEra (AllegraEra c)))))
csCommitteeCreds :: Map
  (Credential
     'ColdCommitteeRole (EraCrypto (PreviousEra (AllegraEra c))))
  (Maybe
     (Credential
        'HotCommitteeRole (EraCrypto (PreviousEra (AllegraEra c)))))
csCommitteeCreds :: forall era.
CommitteeState era
-&gt; Map
     (Credential 'ColdCommitteeRole (EraCrypto era))
     (Maybe (Credential 'HotCommitteeRole (EraCrypto era)))
</span><a href="#local-6989586621679287926"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommitteeState (AllegraEra c)
-&gt; ExceptT Void Identity (CommitteeState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CommitteeState</span></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Map
  (Credential
     'ColdCommitteeRole (EraCrypto (PreviousEra (AllegraEra c))))
  (Maybe
     (Credential
        'HotCommitteeRole (EraCrypto (PreviousEra (AllegraEra c)))))
Map
  (Credential 'ColdCommitteeRole (EraCrypto (AllegraEra c)))
  (Maybe (Credential 'HotCommitteeRole (EraCrypto (AllegraEra c))))
csCommitteeCreds :: Map
  (Credential
     'ColdCommitteeRole (EraCrypto (PreviousEra (AllegraEra c))))
  (Maybe
     (Credential
        'HotCommitteeRole (EraCrypto (PreviousEra (AllegraEra c)))))
csCommitteeCreds :: Map
  (Credential 'ColdCommitteeRole (EraCrypto (AllegraEra c)))
  (Maybe (Credential 'HotCommitteeRole (EraCrypto (AllegraEra c))))
</span><a href="#local-6989586621679287926"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287640"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287640"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287640"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">VState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>  </span><span id="local-6989586621679287941"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; VState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) VState) (VState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287942"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287942"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">VState</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679287944"><span id="local-6989586621679287945"><span id="local-6989586621679287946"><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto (PreviousEra (AllegraEra c))))
  (DRepState (EraCrypto (PreviousEra (AllegraEra c))))
EpochNo
CommitteeState (PreviousEra (AllegraEra c))
vsDReps :: Map
  (Credential 'DRepRole (EraCrypto (PreviousEra (AllegraEra c))))
  (DRepState (EraCrypto (PreviousEra (AllegraEra c))))
vsCommitteeState :: CommitteeState (PreviousEra (AllegraEra c))
vsNumDormantEpochs :: EpochNo
vsCommitteeState :: forall era. VState era -&gt; CommitteeState era
vsDReps :: forall era.
VState era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
vsNumDormantEpochs :: forall era. VState era -&gt; EpochNo
</span><a href="#local-6989586621679287944"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-137"></span><span>    </span><span id="local-6989586621679287950"><span class="annot"><span class="annottext">CommitteeState (AllegraEra c)
</span><a href="#local-6989586621679287950"><span class="hs-identifier hs-var">committeeState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; CommitteeState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) CommitteeState)
     (CommitteeState (AllegraEra c))
forall era (f :: * -&gt; *).
TranslateEra era f =&gt;
TranslationContext era
-&gt; f (PreviousEra era) -&gt; Except (TranslationError era f) (f era)
</span><span class="hs-identifier hs-var">translateEra</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287942"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">CommitteeState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287945"><span class="hs-identifier hs-var">vsCommitteeState</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">VState (AllegraEra c)
-&gt; ExceptT Void Identity (VState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">VState</span></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">vsCommitteeState :: CommitteeState (AllegraEra c)
</span><span class="hs-identifier hs-var">vsCommitteeState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommitteeState (AllegraEra c)
</span><a href="#local-6989586621679287950"><span class="hs-identifier hs-var">committeeState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto (PreviousEra (AllegraEra c))))
  (DRepState (EraCrypto (PreviousEra (AllegraEra c))))
Map
  (Credential 'DRepRole (EraCrypto (AllegraEra c)))
  (DRepState (EraCrypto (AllegraEra c)))
EpochNo
vsDReps :: Map
  (Credential 'DRepRole (EraCrypto (PreviousEra (AllegraEra c))))
  (DRepState (EraCrypto (PreviousEra (AllegraEra c))))
vsNumDormantEpochs :: EpochNo
vsDReps :: Map
  (Credential 'DRepRole (EraCrypto (AllegraEra c)))
  (DRepState (EraCrypto (AllegraEra c)))
vsNumDormantEpochs :: EpochNo
</span><a href="#local-6989586621679287944"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287648"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287648"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287648"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621679287962"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; PState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) PState) (PState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PState</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679287964"><span id="local-6989586621679287965"><span id="local-6989586621679287966"><span id="local-6989586621679287967"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c)))) Coin
Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  EpochNo
Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  (PoolParams (EraCrypto (PreviousEra (AllegraEra c))))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  (PoolParams (EraCrypto (PreviousEra (AllegraEra c))))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  (PoolParams (EraCrypto (PreviousEra (AllegraEra c))))
psRetiring :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  EpochNo
psDeposits :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c)))) Coin
psDeposits :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
psFutureStakePoolParams :: forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psRetiring :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psStakePoolParams :: forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679287964"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState (AllegraEra c)
-&gt; ExceptT Void Identity (PState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PState</span></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c)))) Coin
Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  EpochNo
Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  (PoolParams (EraCrypto (PreviousEra (AllegraEra c))))
Map (KeyHash 'StakePool (EraCrypto (AllegraEra c))) Coin
Map (KeyHash 'StakePool (EraCrypto (AllegraEra c))) EpochNo
Map
  (KeyHash 'StakePool (EraCrypto (AllegraEra c)))
  (PoolParams (EraCrypto (AllegraEra c)))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  (PoolParams (EraCrypto (PreviousEra (AllegraEra c))))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  (PoolParams (EraCrypto (PreviousEra (AllegraEra c))))
psRetiring :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c))))
  EpochNo
psDeposits :: Map
  (KeyHash 'StakePool (EraCrypto (PreviousEra (AllegraEra c)))) Coin
psDeposits :: Map (KeyHash 'StakePool (EraCrypto (AllegraEra c))) Coin
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto (AllegraEra c)))
  (PoolParams (EraCrypto (AllegraEra c)))
psRetiring :: Map (KeyHash 'StakePool (EraCrypto (AllegraEra c))) EpochNo
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto (AllegraEra c)))
  (PoolParams (EraCrypto (AllegraEra c)))
</span><a href="#local-6989586621679287964"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287656"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287656"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287656"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CertState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621679287992"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; CertState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) CertState)
     (CertState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679287993"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287993"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679287994"><span class="annot"><span class="annottext">CertState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287994"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">CertState (AllegraEra c)
-&gt; ExceptT Void Identity (CertState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">CertState</span></span><span>
</span><span id="line-147"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">certDState :: DState (AllegraEra c)
</span><span class="hs-identifier hs-var">certDState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; DState (PreviousEra (AllegraEra c)) -&gt; DState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287993"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(DState (PreviousEra (AllegraEra c)) -&gt; DState (AllegraEra c))
-&gt; DState (PreviousEra (AllegraEra c)) -&gt; DState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CertState (ShelleyEra c) -&gt; DState (ShelleyEra c)
forall era. CertState era -&gt; DState era
</span><span class="hs-identifier hs-var">certDState</span></span><span> </span><span class="annot"><span class="annottext">CertState (ShelleyEra c)
CertState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287994"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">certPState :: PState (AllegraEra c)
</span><span class="hs-identifier hs-var">certPState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; PState (PreviousEra (AllegraEra c)) -&gt; PState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287993"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(PState (PreviousEra (AllegraEra c)) -&gt; PState (AllegraEra c))
-&gt; PState (PreviousEra (AllegraEra c)) -&gt; PState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CertState (ShelleyEra c) -&gt; PState (ShelleyEra c)
forall era. CertState era -&gt; PState era
</span><span class="hs-identifier hs-var">certPState</span></span><span> </span><span class="annot"><span class="annottext">CertState (ShelleyEra c)
CertState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287994"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">certVState :: VState (AllegraEra c)
</span><span class="hs-identifier hs-var">certVState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; VState (PreviousEra (AllegraEra c)) -&gt; VState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679287993"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(VState (PreviousEra (AllegraEra c)) -&gt; VState (AllegraEra c))
-&gt; VState (PreviousEra (AllegraEra c)) -&gt; VState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CertState (ShelleyEra c) -&gt; VState (ShelleyEra c)
forall era. CertState era -&gt; VState era
</span><span class="hs-identifier hs-var">certVState</span></span><span> </span><span class="annot"><span class="annottext">CertState (ShelleyEra c)
CertState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679287994"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-150"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287662"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287662"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287662"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-153"></span><span>  </span><span id="local-6989586621679288015"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; LedgerState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) LedgerState)
     (LedgerState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679288016"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679288016"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679288017"><span class="annot"><span class="annottext">LedgerState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288017"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="annottext">LedgerState (AllegraEra c)
-&gt; ExceptT Void Identity (LedgerState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-155"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lsUTxOState :: UTxOState (AllegraEra c)
</span><span class="hs-identifier hs-var">lsUTxOState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; UTxOState (PreviousEra (AllegraEra c))
-&gt; UTxOState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679288016"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxOState (PreviousEra (AllegraEra c))
 -&gt; UTxOState (AllegraEra c))
-&gt; UTxOState (PreviousEra (AllegraEra c))
-&gt; UTxOState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState (ShelleyEra c) -&gt; UTxOState (ShelleyEra c)
forall era. LedgerState era -&gt; UTxOState era
</span><span class="hs-identifier hs-var">lsUTxOState</span></span><span> </span><span class="annot"><span class="annottext">LedgerState (ShelleyEra c)
LedgerState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288017"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-157"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lsCertState :: CertState (AllegraEra c)
</span><span class="hs-identifier hs-var">lsCertState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; CertState (PreviousEra (AllegraEra c))
-&gt; CertState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679288016"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(CertState (PreviousEra (AllegraEra c))
 -&gt; CertState (AllegraEra c))
-&gt; CertState (PreviousEra (AllegraEra c))
-&gt; CertState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState (ShelleyEra c) -&gt; CertState (ShelleyEra c)
forall era. LedgerState era -&gt; CertState era
</span><span class="hs-identifier hs-var">lsCertState</span></span><span> </span><span class="annot"><span class="annottext">LedgerState (ShelleyEra c)
LedgerState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288017"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-158"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287532"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287532"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287532"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochState</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621679288033"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; EpochState (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) EpochState)
     (EpochState (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679288034"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679288034"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679288035"><span class="annot"><span class="annottext">EpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288035"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="annottext">EpochState (AllegraEra c)
-&gt; ExceptT Void Identity (EpochState (AllegraEra c))
forall a. a -&gt; ExceptT Void Identity a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">EpochState</span></span><span>
</span><span id="line-164"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">esAccountState :: AccountState
</span><span class="hs-identifier hs-var">esAccountState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c) -&gt; AccountState
forall era. EpochState era -&gt; AccountState
</span><span class="hs-identifier hs-var">esAccountState</span></span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c)
EpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288035"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-165"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">esSnapshots :: SnapShots (EraCrypto (AllegraEra c))
</span><span class="hs-identifier hs-var">esSnapshots</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c) -&gt; SnapShots (EraCrypto (ShelleyEra c))
forall era. EpochState era -&gt; SnapShots (EraCrypto era)
</span><span class="hs-identifier hs-var">esSnapshots</span></span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c)
EpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288035"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-166"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">esLState :: LedgerState (AllegraEra c)
</span><span class="hs-identifier hs-var">esLState</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
-&gt; LedgerState (PreviousEra (AllegraEra c))
-&gt; LedgerState (AllegraEra c)
forall era (f :: * -&gt; *).
(TranslateEra era f, TranslationError era f ~ Void) =&gt;
TranslationContext era -&gt; f (PreviousEra era) -&gt; f era
</span><span class="hs-identifier hs-var">translateEra'</span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679288034"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState (PreviousEra (AllegraEra c))
 -&gt; LedgerState (AllegraEra c))
-&gt; LedgerState (PreviousEra (AllegraEra c))
-&gt; LedgerState (AllegraEra c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c) -&gt; LedgerState (ShelleyEra c)
forall era. EpochState era -&gt; LedgerState era
</span><span class="hs-identifier hs-var">esLState</span></span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c)
EpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288035"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-167"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">esNonMyopic :: NonMyopic (EraCrypto (AllegraEra c))
</span><span class="hs-identifier hs-var">esNonMyopic</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c) -&gt; NonMyopic (EraCrypto (ShelleyEra c))
forall era. EpochState era -&gt; NonMyopic (EraCrypto era)
</span><span class="hs-identifier hs-var">esNonMyopic</span></span><span> </span><span class="annot"><span class="annottext">EpochState (ShelleyEra c)
EpochState (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288035"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-168"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287675"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287675"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287675"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyTxWits</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="TranslationError"><span class="annot"><span class="hs-identifier hs-var">TranslationError</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287675"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyTxWits</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecoderError</span></span><span>
</span><span id="line-172"></span><span>  </span><span id="local-6989586621679288059"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; ShelleyTxWits (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) ShelleyTxWits)
     (ShelleyTxWits (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span id="local-6989586621679288060"><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><a href="#local-6989586621679288060"><span class="hs-identifier hs-var">_ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ShelleyTxWits (PreviousEra (AllegraEra c))
-&gt; Except DecoderError (ShelleyTxWits (AllegraEra c))
forall era (ti :: * -&gt; *) (to :: * -&gt; *).
(Era era, ToCBOR (ti (PreviousEra era)),
 DecCBOR (Annotator (to era))) =&gt;
Text -&gt; ti (PreviousEra era) -&gt; Except DecoderError (to era)
</span><span class="hs-identifier hs-var">translateEraThroughCBOR</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ShelleyTxWits&quot;</span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679287682"><span class="annot"><span class="hs-identifier hs-type">Crypto</span></span><span> </span><span class="annot"><a href="#local-6989586621679287682"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TranslateEra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Allegra.Era.html#AllegraEra"><span class="hs-identifier hs-type">AllegraEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679287682"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Update</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>  </span><span id="local-6989586621679288074"><span class="annot"><span class="annottext">translateEra :: TranslationContext (AllegraEra c)
-&gt; Update (PreviousEra (AllegraEra c))
-&gt; Except
     (TranslationError (AllegraEra c) Update) (Update (AllegraEra c))
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">translateEra</span></span></span><span> </span><span class="annot"><span class="annottext">TranslationContext (AllegraEra c)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Update</span></span><span> </span><span id="local-6989586621679288076"><span class="annot"><span class="annottext">ProposedPPUpdates (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288076"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span id="local-6989586621679288077"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679288077"><span class="hs-identifier hs-var">en</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Update (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) Update) (Update (AllegraEra c))
forall a.
a -&gt; ExceptT (TranslationError (AllegraEra c) Update) Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Update (AllegraEra c)
 -&gt; Except
      (TranslationError (AllegraEra c) Update) (Update (AllegraEra c)))
-&gt; Update (AllegraEra c)
-&gt; Except
     (TranslationError (AllegraEra c) Update) (Update (AllegraEra c))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProposedPPUpdates (AllegraEra c)
-&gt; EpochNo -&gt; Update (AllegraEra c)
forall era. ProposedPPUpdates era -&gt; EpochNo -&gt; Update era
</span><span class="hs-identifier hs-var">Update</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProposedPPUpdates (ShelleyEra c)
-&gt; ProposedPPUpdates (AllegraEra c)
forall a b. Coercible a b =&gt; a -&gt; b
</span><a href="file:///nix/store/iq1rbfvif2j9czimi3xf9cqxpanh5494-ghc-9.6.3-doc/share/doc/ghc-9.6.3/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">ProposedPPUpdates (ShelleyEra c)
ProposedPPUpdates (PreviousEra (AllegraEra c))
</span><a href="#local-6989586621679288076"><span class="hs-identifier hs-var">pp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679288077"><span class="hs-identifier hs-var">en</span></a></span><span>
</span><span id="line-176"></span></pre></body></html>